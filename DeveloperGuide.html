<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Address++ - Developer Guide</title>
<link rel="stylesheet" href="stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Address++ - Developer Guide</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>By: <code>Team W09-B2</code>      Since: <code>August 2017</code>      Licence: <code>MIT</code></p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#setting-up">1. Setting up</a>
<ul class="sectlevel2">
<li><a href="#prerequisites">1.1. Prerequisites</a></li>
<li><a href="#setting-up-address-in-your-computer">1.2. Setting up Address++ in your computer</a></li>
<li><a href="#verifying-the-setup">1.3. Verifying the setup</a></li>
<li><a href="#configurations-to-do-before-writing-code">1.4. Configurations to do before writing code</a></li>
</ul>
</li>
<li><a href="#design">2. Design</a>
<ul class="sectlevel2">
<li><a href="#architecture">2.1. Architecture</a></li>
<li><a href="#ui-component">2.2. UI component</a></li>
<li><a href="#logic-component">2.3. Logic component</a></li>
<li><a href="#model-component">2.4. Model component</a></li>
<li><a href="#storage-component">2.5. Storage component</a></li>
<li><a href="#common-classes">2.6. Common classes</a></li>
</ul>
</li>
<li><a href="#implementation">3. Implementation</a>
<ul class="sectlevel2">
<li><a href="#increase-decrease-reset-font-size">3.1. Increase/Decrease/Reset Font Size</a></li>
<li><a href="#setting-avatar-on-viewpersonpanel">3.2. Setting Avatar on ViewPersonPanel</a></li>
<li><a href="#undo-redo-mechanism">3.3. Undo/Redo mechanism</a></li>
<li><a href="#task-object">3.4. Task Object</a></li>
<li><a href="#sort-command">3.5. Sort Command</a></li>
<li><a href="#backup-command">3.6. Backup Command</a></li>
<li><a href="#lock-and-unlock-command">3.7. Lock and Unlock Command</a></li>
<li><a href="#changepassword-command">3.8. ChangePassword Command</a></li>
<li><a href="#privacy-of-fields">3.9. Privacy of fields</a></li>
<li><a href="#changing-of-a-person-s-privacy">3.10. Changing of a Person&#8217;s Privacy</a></li>
<li><a href="#changing-the-address-book-s-privacy-level">3.11. Changing the address book&#8217;s privacy level</a></li>
<li><a href="#locating-a-person-on-google-maps">3.12. Locating a Person on Google Maps</a></li>
<li><a href="#navigating-from-one-address-to-another-using-google-maps">3.13. Navigating from one address to another using Google Maps</a></li>
<li><a href="#opening-and-saving-of-the-xml-save-file">3.14. Opening and Saving of the .xml save file</a></li>
<li><a href="#changing-the-theme-of-the-address-book">3.15. Changing the theme of the address book</a></li>
<li><a href="#add-delete-tag-mechanism">3.16. Add/Delete Tag mechanism</a></li>
<li><a href="#find-tag-mechanism">3.17. Find Tag mechanism</a></li>
<li><a href="#favourite-unfavourite-person-mechanism">3.18. Favourite/Unfavourite Person mechanism</a></li>
<li><a href="#logging">3.19. Logging</a></li>
<li><a href="#configuration">3.20. Configuration</a></li>
</ul>
</li>
<li><a href="#documentation">4. Documentation</a>
<ul class="sectlevel2">
<li><a href="#editing-documentation">4.1. Editing Documentation</a></li>
<li><a href="#publishing-documentation">4.2. Publishing Documentation</a></li>
<li><a href="#converting-documentation-to-pdf-format">4.3. Converting Documentation to PDF format</a></li>
</ul>
</li>
<li><a href="#testing">5. Testing</a>
<ul class="sectlevel2">
<li><a href="#running-tests">5.1. Running Tests</a></li>
<li><a href="#types-of-tests">5.2. Types of tests</a></li>
<li><a href="#troubleshooting-testing">5.3. Troubleshooting Testing</a></li>
</ul>
</li>
<li><a href="#dev-ops">6. Dev Ops</a>
<ul class="sectlevel2">
<li><a href="#build-automation">6.1. Build Automation</a></li>
<li><a href="#continuous-integration">6.2. Continuous Integration</a></li>
<li><a href="#making-a-release">6.3. Making a Release</a></li>
<li><a href="#managing-dependencies">6.4. Managing Dependencies</a></li>
</ul>
</li>
<li><a href="#user-stories">Appendix A: User Stories</a></li>
<li><a href="#use-cases">Appendix B: Use Cases</a></li>
<li><a href="#non-functional-requirements">Appendix C: Non Functional Requirements</a></li>
<li><a href="#glossary">Appendix D: Glossary</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="setting-up"><a class="link" href="#setting-up">1. Setting up</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prerequisites"><a class="link" href="#prerequisites">1.1. Prerequisites</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>JDK <code>1.8.0_60</code></strong> or later</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Having any Java 8 version is not enough.<br>
This app will not work with earlier versions of Java 8.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>IntelliJ</strong> IDE</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
IntelliJ by default has Gradle and JavaFx plugins installed.<br>
Do not disable them. If you have disabled them, go to <code>File</code> &gt; <code>Settings</code> &gt; <code>Plugins</code> to re-enable them.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-address-in-your-computer"><a class="link" href="#setting-up-address-in-your-computer">1.2. Setting up Address++ in your computer</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fork this repo, and clone the fork to your computer</p>
</li>
<li>
<p>Open IntelliJ (if you are not in the welcome screen, click <code>File</code> &gt; <code>Close Project</code> to close the existing project dialog first)</p>
</li>
<li>
<p>Set up the correct JDK version for Gradle</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <code>Configure</code> &gt; <code>Project Defaults</code> &gt; <code>Project Structure</code></p>
</li>
<li>
<p>Click <code>New&#8230;&#8203;</code> and find the directory of the JDK</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <code>Import Project</code></p>
</li>
<li>
<p>Locate the <code>build.gradle</code> file and select it. Click <code>OK</code></p>
</li>
<li>
<p>Click <code>Open as Project</code></p>
</li>
<li>
<p>Click <code>OK</code> to accept the default settings</p>
</li>
<li>
<p>Open a console and run the command <code>gradlew processResources</code> (Mac/Linux: <code>./gradlew processResources</code>). It should finish with the <code>BUILD SUCCESSFUL</code> message.<br>
This will generate all resources required by the application and tests.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="verifying-the-setup"><a class="link" href="#verifying-the-setup">1.3. Verifying the setup</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the <code>seedu.address.MainApp</code> and try a few commands</p>
</li>
<li>
<p><a href="#testing">Run the tests</a> to ensure they all pass.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configurations-to-do-before-writing-code"><a class="link" href="#configurations-to-do-before-writing-code">1.4. Configurations to do before writing code</a></h3>
<div class="sect3">
<h4 id="configuring-the-coding-style"><a class="link" href="#configuring-the-coding-style">1.4.1. Configuring the coding style</a></h4>
<div class="paragraph">
<p>This project follows <a href="https://github.com/oss-generic/process/blob/master/docs/CodingStandards.md">oss-generic coding standards</a>. IntelliJ&#8217;s default style is mostly compliant with ours but it uses a different import order from ours. To rectify,</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <code>File</code> &gt; <code>Settings&#8230;&#8203;</code> (Windows/Linux), or <code>IntelliJ IDEA</code> &gt; <code>Preferences&#8230;&#8203;</code> (macOS)</p>
</li>
<li>
<p>Select <code>Editor</code> &gt; <code>Code Style</code> &gt; <code>Java</code></p>
</li>
<li>
<p>Click on the <code>Imports</code> tab to set the order</p>
<div class="ulist">
<ul>
<li>
<p>For <code>Class count to use import with '*'</code> and <code>Names count to use static import with '*'</code>: Set to <code>999</code> to prevent IntelliJ from contracting the import statements</p>
</li>
<li>
<p>For <code>Import Layout</code>: The order is <code>import static all other imports</code>, <code>import java.*</code>, <code>import javax.*</code>, <code>import org.*</code>, <code>import com.*</code>, <code>import all other imports</code>. Add a <code>&lt;blank line&gt;</code> between each <code>import</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Optionally, you can follow the <a href="UsingCheckstyle.html">UsingCheckstyle.adoc</a> document to configure Intellij to check style-compliance as you write code.</p>
</div>
</div>
<div class="sect3">
<h4 id="updating-documentation-to-match-your-fork"><a class="link" href="#updating-documentation-to-match-your-fork">1.4.2. Updating documentation to match your fork</a></h4>
<div class="paragraph">
<p>After forking the repo, links in the documentation will still point to the <code>CS2103AUG2017-W09-B2/main</code> repo. If you plan to develop this as a separate product (i.e. instead of contributing to the <code>CS2103AUG2017-W09-B2/main</code>) , you should replace the URL in the variable <code>repoURL</code> in <code>DeveloperGuide.adoc</code> and <code>UserGuide.adoc</code> with the URL of your fork.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-up-ci"><a class="link" href="#setting-up-ci">1.4.3. Setting up CI</a></h4>
<div class="paragraph">
<p>Set up Travis to perform Continuous Integration (CI) for your fork. See <a href="UsingTravis.html">UsingTravis.adoc</a> to learn how to set it up.</p>
</div>
<div class="paragraph">
<p>Optionally, you can set up AppVeyor as a second CI (see <a href="UsingAppVeyor.html">UsingAppVeyor.adoc</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Having both Travis and AppVeyor ensures your App works on both Unix-based platforms and Windows-based platforms (Travis is Unix-based and AppVeyor is Windows-based)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="getting-started-with-coding"><a class="link" href="#getting-started-with-coding">1.4.4. Getting started with coding</a></h4>
<div class="paragraph">
<p>When you are ready to start coding,</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get some sense of the overall design by reading the <a href="#architecture">Architecture</a> section.</p>
</li>
<li>
<p>Take a look at the section <a href="#suggested-programming-tasks-to-get-started">Suggested Programming Tasks to Get Started</a>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="design"><a class="link" href="#design">2. Design</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="architecture"><a class="link" href="#architecture">2.1. Architecture</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/Architecture.png" alt="Architecture" width="600">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.1.1 : Architecture Diagram</em></p>
</div>
<div class="paragraph">
<p>The <strong><em>Architecture Diagram</em></strong> given above explains the high-level design of the App. Given below is a quick overview of each component.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The <code>.pptx</code> files used to create diagrams in this document can be found in the <a href="https://github.com/CS2103T-W09B2/addressbook-level4/docs/diagrams/">diagrams</a> folder. To update a diagram, modify the diagram in the pptx file, select the objects of the diagram, and choose <code>Save as picture</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>Main</code> has only one class called <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/MainApp.java"><code>MainApp</code></a>. It is responsible for,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>At app launch: Initializes the components in the correct sequence, and connects them up with each other.</p>
</li>
<li>
<p>At shut down: Shuts down the components and invokes cleanup method where necessary.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="#common-classes"><strong><code>Commons</code></strong></a> represents a collection of classes used by multiple other components. Two of those classes play important roles at the architecture level.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EventsCenter</code> : This class (written using <a href="https://github.com/google/guava/wiki/EventBusExplained">Google&#8217;s Event Bus library</a>) is used by components to communicate with other components using events (i.e. a form of <em>Event Driven</em> design)</p>
</li>
<li>
<p><code>LogsCenter</code> : Used by many classes to write log messages to the App&#8217;s log file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rest of the App consists of four components.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ui-component"><strong><code>UI</code></strong></a> : The UI of the App.</p>
</li>
<li>
<p><a href="#logic-component"><strong><code>Logic</code></strong></a> : The command executor.</p>
</li>
<li>
<p><a href="#model-component"><strong><code>Model</code></strong></a> : Holds the data of the App in-memory.</p>
</li>
<li>
<p><a href="#storage-component"><strong><code>Storage</code></strong></a> : Reads data from, and writes data to, the hard disk.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of the four components</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Defines its <em>API</em> in an <code>interface</code> with the same name as the Component.</p>
</li>
<li>
<p>Exposes its functionality using a <code>{Component Name}Manager</code> class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the <code>Logic</code> component (see the class diagram given below) defines it&#8217;s API in the <code>Logic.java</code> interface and exposes its functionality using the <code>LogicManager.java</code> class.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LogicClassDiagram.png" alt="LogicClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.1.2 : Class Diagram of the Logic Component</em></p>
</div>
<h4 id="events-driven-nature-of-the-design" class="discrete">Events-Driven nature of the design</h4>
<div class="paragraph">
<p>The <em>Sequence Diagram</em> below shows how the components interact for the scenario where the user issues the command <code>delete 1</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SDforDeletePerson.png" alt="SDforDeletePerson" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.1.3a : Component interactions for <code>delete 1</code> command (part 1)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note how the <code>Model</code> simply raises a <code>AddressBookChangedEvent</code> when the Address Book data are changed, instead of asking the <code>Storage</code> to save the updates to the hard disk.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The diagram below shows how the <code>EventsCenter</code> reacts to that event, which eventually results in the updates being saved to the hard disk and the status bar of the UI being updated to reflect the 'Last Updated' time.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SDforDeletePersonEventHandling.png" alt="SDforDeletePersonEventHandling" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.1.3b : Component interactions for <code>delete 1</code> command (part 2)</em></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note how the event is propagated through the <code>EventsCenter</code> to the <code>Storage</code> and <code>UI</code> without <code>Model</code> having to be coupled to either of them. This is an example of how this Event Driven approach helps us reduce direct coupling between components.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The sections below give more details of each component.</p>
</div>
</div>
<div class="sect2">
<h3 id="ui-component"><a class="link" href="#ui-component">2.2. UI component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/UiClassDiagram.png" alt="UiClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.2.1 : Structure of the UI Component</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/ui/Ui.java"><code>Ui.java</code></a></p>
</div>
<div class="paragraph">
<p>The UI consists of a <code>MainWindow</code> that is made up of parts e.g.<code>CommandBox</code>, <code>ResultDisplay</code>, <code>PersonListPanel</code>, <code>StatusBarFooter</code>, <code>BrowserPanel</code> etc. All these, including the <code>MainWindow</code>, inherit from the abstract <code>UiPart</code> class.</p>
</div>
<div class="paragraph">
<p>The <code>UI</code> component uses JavaFx UI framework. The layout of these UI parts are defined in matching <code>.fxml</code> files that are in the <code>src/main/resources/view</code> folder. For example, the layout of the <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/ui/MainWindow.java"><code>MainWindow</code></a> is specified in <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/resources/view/MainWindow.fxml"><code>MainWindow.fxml</code></a></p>
</div>
<div class="paragraph">
<p>The <code>UI</code> component,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Executes user commands using the <code>Logic</code> component.</p>
</li>
<li>
<p>Binds itself to some data in the <code>Model</code> so that the UI can auto-update when data in the <code>Model</code> change.</p>
</li>
<li>
<p>Responds to events raised from various parts of the App and updates the UI accordingly.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="logic-component"><a class="link" href="#logic-component">2.3. Logic component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/LogicClassDiagram.png" alt="LogicClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.3.1 : Structure of the Logic Component</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LogicCommandClassDiagram.png" alt="LogicCommandClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.3.2 : Structure of Commands in the Logic Component. This diagram shows finer details concerning <code>XYZCommand</code> and <code>Command</code> in Figure 2.3.1</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> :
<a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/logic/Logic.java"><code>Logic.java</code></a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>Logic</code> uses the <code>AddressBookParser</code> class to parse the user command.</p>
</li>
<li>
<p>This results in a <code>Command</code> object which is executed by the <code>LogicManager</code>.</p>
</li>
<li>
<p>The command execution can affect the <code>Model</code> (e.g. adding a person) and/or raise events.</p>
</li>
<li>
<p>The result of the command execution is encapsulated as a <code>CommandResult</code> object which is passed back to the <code>Ui</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Given below is the Sequence Diagram for interactions within the <code>Logic</code> component for the <code>execute("delete 1")</code> API call.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/DeletePersonSdForLogic.png" alt="DeletePersonSdForLogic" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.3.1 : Interactions Inside the Logic Component for the <code>delete 1</code> Command</em></p>
</div>
</div>
<div class="sect2">
<h3 id="model-component"><a class="link" href="#model-component">2.4. Model component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/ModelClassDiagram.png" alt="ModelClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.4.1 : Structure of the Model Component</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/model/Model.java"><code>Model.java</code></a></p>
</div>
<div class="paragraph">
<p>The <code>Model</code>,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>stores a <code>UserPref</code> object that represents the user&#8217;s preferences.</p>
</li>
<li>
<p>stores the Address Book data.</p>
</li>
<li>
<p>exposes an unmodifiable <code>ObservableList&lt;ReadOnlyPerson&gt;</code> that can be 'observed' e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.</p>
</li>
<li>
<p>does not depend on any of the other three components.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="storage-component"><a class="link" href="#storage-component">2.5. Storage component</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/StorageClassDiagram.png" alt="StorageClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 2.5.1 : Structure of the Storage Component</em></p>
</div>
<div class="paragraph">
<p><strong>API</strong> : <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/storage/Storage.java"><code>Storage.java</code></a></p>
</div>
<div class="paragraph">
<p>The <code>Storage</code> component,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>can save <code>UserPref</code> objects in json format and read it back.</p>
</li>
<li>
<p>can save the Address Book data in xml format and read it back.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="common-classes"><a class="link" href="#common-classes">2.6. Common classes</a></h3>
<div class="paragraph">
<p>Classes used by multiple components are in the <code>seedu.addressbook.commons</code> package.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementation"><a class="link" href="#implementation">3. Implementation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes some noteworthy details on how certain features are implemented.</p>
</div>
<div class="sect2">
<h3 id="increase-decrease-reset-font-size"><a class="link" href="#increase-decrease-reset-font-size">3.1. Increase/Decrease/Reset Font Size</a></h3>
<div class="paragraph">
<p>On some screens, the text appear to be too small. The aim of the increase/decrease/reset font size feature is to allow
users to customize the application&#8217;s font size quickly on the go.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/FontSizeUI.png" alt="FontSizeUI" width="540">
</div>
</div>
<div class="paragraph">
<p>There are two methods of calling changes in font size:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>onAction</code> handlers are used to handle UI font size buttons. These handlers will post
new events via <code>ComponentManager</code>.</p>
</li>
<li>
<p>CLI commands also post new events to handle font size changes, when the relevant command is entered (e.g. <code>fontsize increase</code>).</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/FontSizeChangeSequenceDiagram.png" alt="FontSizeChangeSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>From the sequence diagram above, we can observe that the font size changes are handled by subscriber functions in PersonListPanel
and TaskListPanel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The initial implementation required access to the model from the UI. This implementation was replaced with one that
standardised the handling of font size change requests through events.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">3.1.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Use either UI or CLI based implementations<br>
<strong>Alternative 1 (current choice):</strong> Implementing both UI and CLI functionality<br>
<strong>Pros:</strong> More options for the user. Not much increase in complexity when implementing the CLI version <br>
<strong>Cons:</strong> This implementation required passing information between classes, which may cause unnecessary coupling.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Implementing only UI functionality<br>
<strong>Pros:</strong> Less tedious to implement and very intuitive for the user<br>
<strong>Cons:</strong> Users who prefer typing commands will not have the option of editing their font sizes using the CLI</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-avatar-on-viewpersonpanel"><a class="link" href="#setting-avatar-on-viewpersonpanel">3.2. Setting Avatar on ViewPersonPanel</a></h3>
<div class="paragraph">
<p>The following function allows the setting of URL for the <code>ImageView</code> attribute within the <code>ViewPersonPanel</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> initializeAvatar() {
        <span class="keyword">try</span> {
            <span class="predefined-type">String</span> avatarPath = person.getAvatar().value;
            <span class="keyword">if</span> (!avatarPath.equals(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
                logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Initializing avatar to image at saved URL</span><span class="delimiter">&quot;</span></span>);
                <span class="predefined-type">Image</span> newImage = <span class="keyword">new</span> <span class="predefined-type">Image</span>(avatarPath);
                avatarImage.setImage(newImage);
            }
        } <span class="keyword">catch</span> (<span class="exception">Exception</span> e) {
            e.printStackTrace();
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>initializeAvatar</code> method piggybacks on the <code>handlePersonPanelSelectionChangedEvent</code> event handler. Whenever there is
a change in the person selection panel, this function will call the <code>initializeAvatar</code> method, which will update
the <code>ImageView</code> attribute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Subscribe</span>
<span class="directive">private</span> <span class="type">void</span> handlePersonPanelSelectionChangedEvent(PersonPanelSelectionChangedEvent event) {
    logger.info(LogsCenter.getEventHandlingLogMessage(event));
    <span class="local-variable">this</span>.person = event.getNewSelection().person;
    initializeWithPerson(person);
    initializeAvatar();
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of v1.5, the avatar field supports only URLs sourced online. References to local files may work but require the
prefix "file:"
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="undo-redo-mechanism"><a class="link" href="#undo-redo-mechanism">3.3. Undo/Redo mechanism</a></h3>
<div class="paragraph">
<p>The undo/redo mechanism is facilitated by an <code>UndoRedoStack</code>, which resides inside <code>LogicManager</code>. It supports undoing and redoing of commands that modifies the state of the address book (e.g. <code>add</code>, <code>edit</code>). Such commands will inherit from <code>UndoableCommand</code>.</p>
</div>
<div class="paragraph">
<p><code>UndoRedoStack</code> only deals with <code>UndoableCommands</code>. Commands that cannot be undone will inherit from <code>Command</code> instead. The following diagram shows the inheritance diagram for commands:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LogicCommandClassDiagram.png" alt="LogicCommandClassDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>As you can see from the diagram, <code>UndoableCommand</code> adds an extra layer between the abstract <code>Command</code> class and concrete commands that can be undone, such as the <code>DeleteCommand</code>. Note that extra tasks need to be done when executing a command in an <em>undoable</em> way, such as saving the state of the address book before execution. <code>UndoableCommand</code> contains the high-level algorithm for those extra tasks while the child classes implements the details of how to execute the specific command. Note that this technique of putting the high-level algorithm in the parent class and lower-level steps of the algorithm in child classes is also known as the <a href="https://www.tutorialspoint.com/design_pattern/template_pattern.htm">template pattern</a>.</p>
</div>
<div class="paragraph">
<p>Commands that are not undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ListCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... list logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the extra layer, the commands that are undoable are implemented this way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">UndoableCommand</span> <span class="directive">extends</span> Command {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult execute() {
        <span class="comment">// ... undo logic ...</span>

        executeUndoableCommand();
    }
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">DeleteCommand</span> <span class="directive">extends</span> UndoableCommand {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> CommandResult executeUndoableCommand() {
        <span class="comment">// ... delete logic ...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose that the user has just launched the application. The <code>UndoRedoStack</code> will be empty at the beginning.</p>
</div>
<div class="paragraph">
<p>The user executes a new <code>UndoableCommand</code>, <code>delete 5</code>, to delete the 5th person in the address book. The current state of the address book is saved before the <code>delete 5</code> command executes. The <code>delete 5</code> command will then be pushed onto the <code>undoStack</code> (the current state is saved together with the command).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoStartingStackDiagram.png" alt="UndoRedoStartingStackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>As the user continues to use the program, more commands are added into the <code>undoStack</code>. For example, the user may execute <code>add n/David &#8230;&#8203;</code> to add a new person.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoNewCommand1StackDiagram.png" alt="UndoRedoNewCommand1StackDiagram" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not be pushed to the <code>UndoRedoStack</code> at all.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides that adding the person was a mistake, and decides to undo that action using <code>undo</code>.</p>
</div>
<div class="paragraph">
<p>We will pop the most recent command out of the <code>undoStack</code> and push it back to the <code>redoStack</code>. We will restore the address book to the state before the <code>add</code> command executed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoExecuteUndoStackDiagram.png" alt="UndoRedoExecuteUndoStackDiagram" width="800">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>undoStack</code> is empty, then there are no other commands left to be undone, and an <code>Exception</code> will be thrown when popping the <code>undoStack</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoSequenceDiagram.png" alt="UndoRedoSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>The redo does the exact opposite (pops from <code>redoStack</code>, push to <code>undoStack</code>, and restores the address book to the state after the command is executed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>redoStack</code> is empty, then there are no other commands left to be redone, and an <code>Exception</code> will be thrown when popping the <code>redoStack</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The user now decides to execute a new command, <code>clear</code>. As before, <code>clear</code> will be pushed into the <code>undoStack</code>. This time the <code>redoStack</code> is no longer empty. It will be purged as it no longer make sense to redo the <code>add n/David</code> command (this is the behavior that most modern desktop applications follow).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoNewCommand2StackDiagram.png" alt="UndoRedoNewCommand2StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>Commands that are not undoable are not added into the <code>undoStack</code>. For example, <code>list</code>, which inherits from <code>Command</code> rather than <code>UndoableCommand</code>, will not be added after execution:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoNewCommand3StackDiagram.png" alt="UndoRedoNewCommand3StackDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>The following activity diagram summarize what happens inside the <code>UndoRedoStack</code> when a user executes a new command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/UndoRedoActivityDiagram.png" alt="UndoRedoActivityDiagram" width="200">
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-2"><a class="link" href="#design-considerations-2">3.3.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>UndoableCommand</code><br>
<strong>Alternative 1 (current choice):</strong> Add a new abstract method <code>executeUndoableCommand()</code><br>
<strong>Pros:</strong> We will not lose any undone/redone functionality as it is now part of the default behaviour. Classes that deal with <code>Command</code> do not have to know that <code>executeUndoableCommand()</code> exist.<br></p>
</div>
<div class="paragraph">
<p><strong>Cons:</strong> Hard for new developers to understand the template pattern.<br>
<strong>Alternative 2:</strong> Just override <code>execute()</code><br>
<strong>Pros:</strong> Does not involve the template pattern, easier for new developers to understand.<br>
<strong>Cons:</strong> Classes that inherit from <code>UndoableCommand</code> must remember to call <code>super.execute()</code>, or lose the ability to undo/redo.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> How undo &amp; redo executes<br>
<strong>Alternative 1 (current choice):</strong> Saves the entire address book.<br>
<strong>Pros:</strong> Easy to implement.<br>
<strong>Cons:</strong> May have performance issues in terms of memory usage.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Individual command knows how to undo/redo by itself.<br>
<strong>Pros:</strong> Will use less memory (e.g. for <code>delete</code>, just save the person being deleted).<br>
<strong>Cons:</strong> We must ensure that the implementation of each individual command are correct.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Type of commands that can be undone/redone<br>
<strong>Alternative 1 (current choice):</strong> Only include commands that modifies the address book (<code>add</code>, <code>clear</code>, <code>edit</code>).<br>
<strong>Pros:</strong> We only revert changes that are hard to change back (the view can easily be re-modified as no data are lost).<br>
<strong>Cons:</strong> User might think that undo also applies when the list is modified (undoing filtering for example), only to realize that it does not do that, after executing <code>undo</code>.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Include all commands.<br>
<strong>Pros:</strong> Might be more intuitive for the user.<br>
<strong>Cons:</strong> User have no way of skipping such commands if he or she just want to reset the state of the address book and not the view.<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Data structure to support the undo/redo commands<br>
<strong>Alternative 1 (current choice):</strong> Use separate stack for undo and redo<br>
<strong>Pros:</strong> Easy to understand for new Computer Science student undergraduates to understand, who are likely to be the new incoming developers of our project.<br>
<strong>Cons:</strong> Logic is duplicated twice. For example, when a new command is executed, we must remember to update both <code>HistoryManager</code> and <code>UndoRedoStack</code>.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Use <code>HistoryManager</code> for undo/redo<br>
<strong>Pros:</strong> We do not need to maintain a separate stack, and just reuse what is already in the codebase.<br>
<strong>Cons:</strong> Requires dealing with commands that have already been undone: We must remember to skip these commands. Violates Single Responsibility Principle and Separation of Concerns as <code>HistoryManager</code> now needs to do two different things.<br></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="task-object"><a class="link" href="#task-object">3.4. Task Object</a></h3>
<div class="paragraph">
<p>The Task object stores information related to a single deadline or task, in a manner similar to how Person information is stored.<br>
As such, it also shares the same types of commands as the Person object, namely the <code>add</code>, <code>delete</code>, <code>find</code>, <code>select</code>, and <code>edit</code> commands.
Object inheritance is thus used to create the commands that are shared with those used to handle Person objects.</p>
</div>
<div class="sect3">
<h4 id="task-related-command-implementation"><a class="link" href="#task-related-command-implementation">3.4.1. Task-related Command implementation</a></h4>
<div class="paragraph">
<p>An example of using inheritance to handle Person vs Task addition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">AddPersonCommand</span> <span class="directive">extends</span> AddCommand {
}

<span class="directive">public</span> <span class="type">class</span> <span class="class">AddTaskCommand</span> <span class="directive">extends</span> AddCommand {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> AddCommand parse(<span class="predefined-type">String</span> args) <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="type">int</span> objectType = checkType(args);

    <span class="keyword">if</span> (objectType == HANDLE_TYPE_PERSON) {
        Person toAdd = createNewPerson(args);
        <span class="keyword">return</span> AddPersonCommand(toAdd);
    } <span class="keyword">else</span> <span class="keyword">if</span> (objectType == HANDLE_TYPE_TASK) {
        Task toAdd = createNewTask(args);
        <span class="keyword">return</span> AddTaskCommand(toAdd);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Parser in charge of the command will thus return either an AddPersonCommand, or an AddTaskCommand, depending on whether you specify to add a Task or not in the arguments.
<br>
The sequence diagram below shows how this is done:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/AddTaskSeq.png" alt="AddTaskSeq" width="800">
</div>
</div>
</div>
<div class="sect3">
<h4 id="task-object-storage"><a class="link" href="#task-object-storage">3.4.2. Task Object Storage</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">---
    <span class="tag">&lt;persons&gt;</span>
        <span class="tag">&lt;name&gt;</span>someone else<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;phone&gt;</span><span class="tag">&lt;/phone&gt;</span>
        <span class="tag">&lt;email&gt;</span><span class="tag">&lt;/email&gt;</span>
        <span class="tag">&lt;address&gt;</span><span class="tag">&lt;/address&gt;</span>
    <span class="tag">&lt;/persons&gt;</span>
    <span class="tag">&lt;tasks&gt;</span>
        <span class="tag">&lt;name&gt;</span>Buy new pencil<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;description&gt;</span>Buy new pencil for writing purposes<span class="tag">&lt;/description&gt;</span>
        <span class="tag">&lt;deadline&gt;</span><span class="tag">&lt;/deadline&gt;</span>
        <span class="tag">&lt;priority&gt;</span>2<span class="tag">&lt;/priority&gt;</span>
    <span class="tag">&lt;/tasks&gt;</span>
---</code></pre>
</div>
</div>
<div class="paragraph">
<p>Task objects are stored in a similar manner to Person objects, and share the same level of hierarchy as Person objects. During startup, tasks are read and entered into the UniqueTaskList, which handles all the tasks that are present in the address book.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-3"><a class="link" href="#design-considerations-3">3.4.3. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of Task-related commands<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Use inheritance to implement different commands for Task and Person objects<br>
<strong>Pros:</strong> Can be easily extended to allow handling of other types of objects, and preserves Separation of Concerns.<br>
<strong>Cons:</strong> Minor code duplication occurs as the commands for Person and Tasks objects share the same structure.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Use polymorphism to allow existing commands to implement task handling<br>
<strong>Pros:</strong> Code duplication is kept to a minimum as the Command will handle Task and Person objects in the same class.<br>
<strong>Cons:</strong> Single Responsibility Principle is violated as each Command class now needs to handle 2 different types of objects.<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Storage of Task objects<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Store Task objects together in the default XML storage file<br>
<strong>Pros</strong> Only 1 storage file is needed. The storage manager thus only needs to refer to one storage<br>
<strong>Cons</strong> Any changes to the Person or Task will affect the storage of both the Person and Task objects. This will increase coupling between the Person and Task classes.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Store Tasks objects in a separate XML file<br>
<strong>Pros:</strong> Easier to manage as Person storage will not interfere with Task storage, and vice versa.<br>
<strong>Cons:</strong> All existing save/load functions will require an additional method to handle Task storage.<br></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sort-command"><a class="link" href="#sort-command">3.5. Sort Command</a></h3>
<div class="paragraph">
<p>The sort command is facilitated by the <code>sortBy</code> methods in UniquePersonList and UniqueTaskList. It supports
sort by ascending or by descending order in any field.</p>
</div>
<div class="paragraph">
<p>The sort enhancement utilises the Java Collections Sort API by passing it a custom Comparator.</p>
</div>
<div class="paragraph">
<p>The sort command is parsed through <code>SortCommandParser</code>, which passes control over to the <code>SortCommand</code>
class. The actual sorting happens via the UniquePersonList class or the UniqueTaskList class.</p>
</div>
<div class="paragraph">
<p>The UML Class diagram for sort commands that trigger sorting in person listings is shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SortCommandPersonDiagram.png" alt="SortCommandPersonDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>Likewise, the UML Class diagram for sort commands that trigger sorting in task listings is shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SortCommandTaskDiagram.png" alt="SortCommandTaskDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>We can deduce from the UML diagrams diagrams above that the only difference between the implementation
of the sorting for persons and tasks lies in the location where the sorting is actually executed.
The sorting of persons happens in <code>UniquePersonList</code> class while the sorting of tasks happens in <code>UniqueTaskList</code>.</p>
</div>
<div class="paragraph">
<p>Suppose a user enters a new command <code>sort person name desc</code>. The following sequence diagram
demonstrates how the sort command works.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/SortSequenceDiagram.png" alt="SortSequenceDiagram" width=""800">
</div>
</div>
<div class="paragraph">
<p>Note that the execution of the sort methods results in the actual person or task list being sorted. This list will be
reflected in both the application&#8217;s storage as well as the graphical user interface.</p>
</div>
<div class="sect3">
<h4 id="design-considerations-4"><a class="link" href="#design-considerations-4">3.5.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>sort Command</code><br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Implement sorting functionality in <code>UniquePersonList</code> and <code>UniqueTaskList</code> class.<br>
<strong>Pros:</strong> Delegates the concern of sorting to the class that is responsible for the core of most operations done to the lists.
Future changes to the implementation will be easier as a consequence.<br>
<strong>Cons:</strong> Hard for new developers to understand the flow of control passed between classes at first.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Implement the sorting functionality within other classes like <code>AddressBook</code> or <code>SortCommand</code>.<br>
<strong>Pros:</strong> May be more intuitive for new developers and it is easier to trace function calls between lesser classes involved.<br>
<strong>Cons:</strong> Violates Separation of Concern principle and causes unnecessary content coupling whereby the <code>UniquePersonList</code>
and <code>UniqueTaskList</code> will have to rely on the <code>SortCommand</code> class.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Temporary Sort Implementation vs. Persistent Sort Implementation<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Saves the entire address book after sorting.<br>
<strong>Pros:</strong> More intuitive and reduces complexity in implementation.<br>
<strong>Cons:</strong> Old order of contact instances in the address book will be lost<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Duplicate a temporary version of the list and sort it for viewing (i.e. the actual list is not sorted)<br>
<strong>Pros:</strong> Old order of contact instances remains intact.<br>
<strong>Cons:</strong> Will use more memory and may be less intuitive for developer to understand and in terms of user experience. Also, sorting will not persist in the system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="backup-command"><a class="link" href="#backup-command">3.6. Backup Command</a></h3>
<div class="paragraph">
<p>The <code>backup</code> command uses the event handler <code>BackupRequestEvent</code>. When raised, this
event notifies the subscriber <code>backupAddressBook</code> method in Storage class.</p>
</div>
<div class="paragraph">
<p>The outlining sequence diagram for this process (excluding the interaction with the
<code>BackupRequestEvent</code>) is shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/BackupSequenceDiagram.png" alt="BackupSequenceDiagram" width=""800">
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-5"><a class="link" href="#design-considerations-5">3.6.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>backup Command</code><br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Use an event handler to initialize the backup process<br>
<strong>Pros:</strong> Avoids coupling the logic to the storage unnecessarily.<br>
<strong>Cons:</strong> May not be as intuitive for some developers in the beginning<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Access storage component directly instead of using event handlers<br>
<strong>Pros:</strong> May be more intuitive as it is a direct approach<br>
<strong>Cons:</strong> Violates the Law of Demeter.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="lock-and-unlock-command"><a class="link" href="#lock-and-unlock-command">3.7. Lock and Unlock Command</a></h3>
<div class="paragraph">
<p>The <code>lock</code> and <code>unlock</code> commands utilise the Model to access the user preferences of
the application.</p>
</div>
<div class="paragraph">
<p>Arguments are processed in the <code>UnlockCommandParser</code> or <code>LockCommandParser</code>,
which passes control over to the <code>UnlockCommand</code> and <code>LockCommand</code> class respectively.
These <code>Command</code> classes will then call the Model to toggle the lock&#8217;s state.</p>
</div>
<div class="paragraph">
<p>The activity diagram below outlines the basic logic of the lock states concept.:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LockStatesActivityDiagram.png" alt="LockStatesActivityDiagram" width=""800">
</div>
</div>
<div class="paragraph">
<p>From the activity diagram we can see that lock states are preserved in the <code>preferences.json</code>
file after the application closes by passing the lock state into the <code>UserPrefs</code> class to be
saved by the Storage component.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default state of the lock is set to False (i.e. locked) when the user first opens the
application. Subsequent changes to the lock will persist in the user preferences.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="design-considerations-6"><a class="link" href="#design-considerations-6">3.7.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>lock</code> and <code>unlock</code> Commands</p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Call methods in the Model directly to change UserPrefs<br>
<strong>Pros:</strong> More intuitive. Highest returns for minimal amount of code<br>
<strong>Cons:</strong> May be confusing to some developers in the beginning, since another
intuitive approach is to use event handlers<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Use Event Handlers<br>
<strong>Pros:</strong> More intuitive for some developers<br>
<strong>Cons:</strong> Will still have to access Model, which makes its advantage over direct calls next to none</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changepassword-command"><a class="link" href="#changepassword-command">3.8. ChangePassword Command</a></h3>
<div class="paragraph">
<p>The default password when users first open Address++ is <code>password</code>. The ChangePassword command
sets a new password in the temporary User Preferences. When the application is closed, this
information is passed to the Storage Component to be saved into the file <code>preferences.json</code></p>
</div>
<div class="paragraph">
<p>To illustrate this concept better, let us have a look at the <code>preferences.json</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">guiSettings</span><span class="delimiter">&quot;</span></span> : {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">windowWidth</span><span class="delimiter">&quot;</span></span> : <span class="float">1309.0</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">windowHeight</span><span class="delimiter">&quot;</span></span> : <span class="float">720.0</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">windowCoordinates</span><span class="delimiter">&quot;</span></span> : {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span> : <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">y</span><span class="delimiter">&quot;</span></span> : <span class="integer">22</span>
    }
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">addressBookFilePath</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">data/addressbook.xml</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">addressBookName</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">My Address++</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">addressBookLockState</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">addressBookEncryptedPassword</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">theme</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">/view/DarkTheme.css</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As shown in the cope snippet above, the password is stored as one of the entries in the JSON
file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
SHA256 encryption was used to calculate a hash for the password. This is to delay anyone snooping around the
user&#8217;s file directories from seeing the real password immediately.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Validation Checks</strong></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Password Validation</strong> &#8594; Is the password correct?</p>
</li>
<li>
<p><strong>Password Confirmation</strong> &#8594; Does the new password and confirmation password match?</p>
</li>
<li>
<p><strong>Password Uniqueness</strong> &#8594; Is the new password different from the old password?</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>The activity diagram below outlines the process flow for the <code>ChangePasswordCommand</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ChangePasswordActivityDiagram.png" alt="ChangePasswordActivityDiagram" width=""800">
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-7"><a class="link" href="#design-considerations-7">3.8.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> On Demand Saving vs. Save On Exit<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Save On Exit<br>
<strong>Pros:</strong> Simplifies process flow as the command class no longer has to access both Model and Storage components<br>
<strong>Cons:</strong> Any system/application crash may cause change password data to be lost<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> On Demand Saving<br>
<strong>Pros:</strong> Changes may persist even through system and application crashes<br>
<strong>Cons:</strong> May slow down application, although not significantly. Complicates process flow.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="privacy-of-fields"><a class="link" href="#privacy-of-fields">3.9. Privacy of fields</a></h3>
<div class="paragraph">
<p>The <code>Name</code>, <code>Phone</code>, <code>Email</code>, <code>Address</code> and <code>Remark</code> of a <code>Person</code> contains a boolean <code>isPrivate</code>, which will determine if the field belonging to that person is private or not.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/PersonClassDiagramPrivacy.png" alt="PersonClassDiagramPrivacy" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.7.1 : Class diagram for a Person, only Name, Phone, Email, Address and Remark contain an isPrivate boolean to indicate if it is private or not</em></p>
</div>
<div class="paragraph">
<p>Adding a person with private fields uses the same <code>AddCommand</code> as adding a person with no public fields.<br>
To determine if the field that is added should be set to private, a <code>p</code> is added to the start of the prefix.<br>
Hence, <code>pe/[EMAIL]</code> will set that person&#8217;s email to be private, whereas if <code>e/[EMAIL]</code> was used, that person&#8217;s email would be public.<br></p>
</div>
<div class="paragraph">
<p>These new prefixes can be found in <code>CliSyntax</code>, and <code>AddCommandParser</code> will take data with these prefixes.
<code>AddCommandParser</code> will then call the appropriate method in <code>ParserUtil</code>, which will parse the string provided into a new field.
Depending on whether or not the field is supposed to be private, <code>ParsetUtil</code> will call the appropriate constructor.
Upon obtaining all the fields anc creating a new <code>Person</code>, <code>AddCommandParser</code> will create a new <code>AddCommand</code> to handle the addition of the new <code>Person</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/AddPrivateSequenceDiagram.png" alt="AddPrivateSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.7.2 : Sequence Diagram for adding a Person with private fields</em></p>
</div>
<div class="paragraph">
<p>If a field is private, then the <code>toString</code> method will return a string <code>&lt;Private [FIELD]&gt;</code>, where <code>[FIELD]</code> is the name of that field.<br>
This can be seen from the <code>toString</code> method in <code>Name</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Override</span>
<span class="directive">public</span> <span class="predefined-type">String</span> toString() {
    <span class="keyword">if</span> (isPrivate) {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Private Name&gt;</span><span class="delimiter">&quot;</span></span>;
    }
    <span class="keyword">return</span> fullName;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the information displayed in a person&#8217;s card in the UI gets the value of the field through the <code>toString()</code> method, this hides the actual value of the field in the UI.</p>
</div>
<div class="paragraph">
<p>In addition, if <code>isPrivate</code> is <code>true</code> for <code>Name</code>, clicking on a person&#8217;s card in the UI will not trigger a search on Google for that person&#8217;s name.</p>
</div>
<div class="paragraph">
<p>Instead, a <code>NewResultAvailableEvent</code> will be raised by <code>BrowserPanel</code> to inform the user that they are not allowed to search for a person possessing a private <code>Name</code>.</p>
</div>
<div class="paragraph">
<p>To keep track of whether each field is private or not, <code>XmlAdaptedPerson</code> will have to store the <code>isPrivate</code> value for each field of <code>Person</code>.
This is done by adding the following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
   <span class="directive">private</span> <span class="predefined-type">Boolean</span> nameIsPrivate;
<span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
   <span class="directive">private</span> <span class="predefined-type">Boolean</span> phoneIsPrivate;
<span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
   <span class="directive">private</span> <span class="predefined-type">Boolean</span> emailIsPrivate;
<span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
   <span class="directive">private</span> <span class="predefined-type">Boolean</span> addressIsPrivate;
<span class="annotation">@XmlElement</span>(required = <span class="predefined-constant">true</span>)
   <span class="directive">private</span> <span class="predefined-type">Boolean</span> remarkIsPrivate;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which results in a <code>Person</code> being saved in the xml file in the following format</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;persons&gt;</span>
    <span class="tag">&lt;name&gt;</span>Alex Yeoh<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;nameIsPrivate&gt;</span>false<span class="tag">&lt;/nameIsPrivate&gt;</span>
    <span class="tag">&lt;phone&gt;</span>87438807<span class="tag">&lt;/phone&gt;</span>
    <span class="tag">&lt;phoneIsPrivate&gt;</span>false<span class="tag">&lt;/phoneIsPrivate&gt;</span>
    <span class="tag">&lt;email&gt;</span>alexyeoh@example.com<span class="tag">&lt;/email&gt;</span>
    <span class="tag">&lt;emailIsPrivate&gt;</span>false<span class="tag">&lt;/emailIsPrivate&gt;</span>
    <span class="tag">&lt;address&gt;</span>Blk 30 Geylang Street 29, #06-40<span class="tag">&lt;/address&gt;</span>
    <span class="tag">&lt;addressIsPrivate&gt;</span>false<span class="tag">&lt;/addressIsPrivate&gt;</span>
    <span class="tag">&lt;remark&gt;</span>cheerful lad<span class="tag">&lt;/remark&gt;</span>
    <span class="tag">&lt;remarkIsPrivate&gt;</span>false<span class="tag">&lt;/remarkIsPrivate&gt;</span>
    <span class="tag">&lt;tagged&gt;</span>friends<span class="tag">&lt;/tagged&gt;</span>
<span class="tag">&lt;/persons&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If an old save file without privacy data is loaded, then the <code>toModelType()</code> method in <code>XmlAdaptedPerson</code> will set <code>isPrivate</code> to be <code>false</code> for each field of <code>Person</code>, to keep the displayed information the same.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a private field is to be edited by <code>EditCommand</code>, <code>createEditedPerson()</code> in <code>EditCommand</code> will not modify the data of that field, even though <code>EditCommand</code> will create a new <code>CommandResult</code> with a success message.<br>
Hence, a private field will remain private and the value stored by that field will remain the same as it originally was.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This is done through the <code>createEditedPerson</code> method in <code>EditCommand</code>.
<code>createEditedPerson</code> sets the boolean <code>areFieldsAllPrivate</code> to initially be true.</p>
</div>
<div class="paragraph">
<p>As the new instance of each field is being generated, if any field contains a value in the input <code>EditPersonDescriptor</code> and that field was not originally private, <code>areFieldsAllPrivate</code> is set to false.</p>
</div>
<div class="paragraph">
<p>This can be seen from the following code, which is used for the generation of a new <code>Name</code> object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">Name</span> createUpdatedName(ReadOnlyPerson personToEdit, EditPersonDescriptor editPersonDescriptor) {
    <span class="predefined-type">Name</span> updatedName;
    <span class="keyword">if</span> (!personToEdit.getName().isPrivate()) {
        updatedName = editPersonDescriptor.getName().orElse(personToEdit.getName());
        <span class="keyword">if</span> (editPersonDescriptor.getName().isPresent()) {
            areFieldsAllPrivate = <span class="predefined-constant">false</span>;
        }
    } <span class="keyword">else</span> {
        updatedName = personToEdit.getName();
    }
    <span class="keyword">return</span> updatedName;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon generation of all the fields, if <code>areFieldsAllPrivate</code> is still true, <code>createEditedPerson</code> will throw an <code>IllegalArgumentException</code>, which will cause <code>EditCommand</code> to throw a <code>CommandException</code> and prevent the command from continuing.</p>
</div>
<div class="sect3">
<h4 id="design-considerations-8"><a class="link" href="#design-considerations-8">3.9.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>isPrivate</code><br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Add a boolean to each field class.<br>
<strong>Pros:</strong> Similar implementation to how the fields are currently being implemented. Privacy settings can be obtained directly from the field class itself.<br>
<strong>Cons:</strong> Repetitive code. Additional overloaded constructor and methods are needed to set and get the value of <code>isPrivate</code>. <br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Store a person&#8217;s privacy settings outside of the field classes in an Array or a HashMap in <code>Person</code>.<br>
<strong>Pros:</strong> Can access and modify the privacy settings of all fields easily.<br>
<strong>Cons:</strong> The fields themselves do not have any indication of whether or not they are private, and will have to check with the <code>Person</code> the belong to.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> How to determine if a field for a newly added person should be private.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Add a <code>p</code> to the start of each field&#8217;s prefix to signify that that field should be private.<br>
<strong>Pros:</strong> Can add <code>Person</code> containing any combination of private and public fields in 1 command line.<br>
<strong>Cons:</strong> Have to modify <code>AddCommand</code>, <code>AddCommandParser</code>, <code>ParserUtil</code> and other classes to detect the new prefix and call a separate constructor when a field is private.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> A <code>Person</code> is added with all field public, a separate command will then have to be used to set the desired fields to be private.<br>
<strong>Pros:</strong> Easier implementation, do not have to modify <code>AddCommand</code>.<br>
<strong>Cons:</strong> Requires 2 command lines to create a <code>Person</code> with private fields, which takes more time and is more inconvenient for users.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changing-of-a-person-s-privacy"><a class="link" href="#changing-of-a-person-s-privacy">3.10. Changing of a Person&#8217;s Privacy</a></h3>
<div class="paragraph">
<p><code>ChangePrivacyCommand</code> facilitates the setting of an existing person&#8217;s field&#8217;s privacy. Depending on the user&#8217;s input, <code>ChangePrivacyCommand</code> will use each field&#8217;s <code>setPrivate()</code> method to set the value of <code>isPrivate</code>.</p>
</div>
<div class="paragraph">
<p>The sequence diagram for <code>ChangePrivacyCommand</code> is illustrated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ChangePrivacySequenceDiagram.png" alt="ChangePrivacySequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.8.1 : Sequence Diagram for changing the privacy of a Person&#8217;s fields</em></p>
</div>
<div class="paragraph">
<p>Upon receiving a String containing the arguments from <code>AddressBookParser</code>, <code>ChangePrivacyCommandParser</code> will create a <code>PersonPrivacySettings</code> object.</p>
</div>
<div class="paragraph">
<p>Depending on the input, the <code>ChangePrivacyCommandParser</code> will set the privacy values, represented by Booleans, in the <code>PersonPrivacySettings</code> object to be <code>true</code> or <code>false</code>.
This is illustrated in the code below, which shows how the privacy of <code>Name</code> is set in <code>PersonPrivacySettings</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> checkName(ArgumentMultimap argMultimap, PersonPrivacySettings pps) <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="keyword">if</span> (argMultimap.getValue(PREFIX_NAME).isPresent()) {
        <span class="keyword">if</span> (argMultimap.getValue(PREFIX_NAME).toString().equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Optional[true]</span><span class="delimiter">&quot;</span></span>)) {
            pps.setNameIsPrivate(<span class="predefined-constant">true</span>);

        } <span class="keyword">else</span> <span class="keyword">if</span> (argMultimap.getValue(PREFIX_NAME).toString().equals(<span class="string"><span class="delimiter">&quot;</span><span class="content">Optional[false]</span><span class="delimiter">&quot;</span></span>)) {
            pps.setNameIsPrivate(<span class="predefined-constant">false</span>);
        } <span class="keyword">else</span> {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(<span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT,
                    ChangePrivacyCommand.MESSAGE_USAGE));
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ChangePrivacyCommandParser</code> will then create a new <code>ChangePrivacyCommand</code> using the input <code>Index</code> and the <code>PersonPrivacySettings</code></p>
</div>
<div class="paragraph">
<p>When <code>ChangePrivacyCommand</code> starts executing, it will create a new <code>Person</code> based on the data of the <code>Person</code> at the specified <code>Index</code>.
It will then adjust the privacy values based on the input <code>PersonPrivacySettings</code>. For example, the new <code>Name</code> is created in the code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">Name</span> createNameWithPrivacy(ReadOnlyPerson person, PersonPrivacySettings pps) {
    <span class="predefined-type">Name</span> name;
    <span class="keyword">try</span> {
        <span class="keyword">if</span> (person.getName().getIsPrivate()) {
            person.getName().setPrivate(<span class="predefined-constant">false</span>);
            name = <span class="keyword">new</span> <span class="predefined-type">Name</span>(person.getName().toString());
            person.getName().setPrivate(<span class="predefined-constant">true</span>);
        } <span class="keyword">else</span> {
            name = <span class="keyword">new</span> <span class="predefined-type">Name</span>(person.getName().toString());
        }
    } <span class="keyword">catch</span> (IllegalValueException e) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">AssertionError</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid Name</span><span class="delimiter">&quot;</span></span>);
    }
    <span class="keyword">if</span> (pps.getNameIsPrivate() != <span class="predefined-constant">null</span>) {
        name.setPrivate(pps.getNameIsPrivate());
    } <span class="keyword">else</span> {
        name.setPrivate(person.getName().getIsPrivate());
    }
    <span class="keyword">return</span> name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once it is done, it will update the original <code>Person</code> with the newly created <code>Person</code> in <code>Model</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If there are missing fields in the input string, the getter methods in <code>PersonPrivacySettings</code> will return <code>false</code>, but the actual value stored will remain as <code>null</code>.
This allows <code>isAnyFieldNonNull</code> to check if the user has input any field at all.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="design-considerations-9"><a class="link" href="#design-considerations-9">3.10.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of changing of a person&#8217;s privacy.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Create a separate command to do so.<br>
<strong>Pros:</strong> It is clear to users and developers that <code>changeprivacy</code> is to modify a person&#8217;s privacy while <code>edit</code> changes the actual data if the relevant field is not private. <br>
<strong>Cons:</strong> Additional command, parser and tests must be created. <br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Enhance the functionality of EditCommand.<br>
<strong>Pros:</strong> Can make use of existing code to aid the implementation.<br>
<strong>Cons:</strong> Increases the complexity of EditCommand for both users and developers. More ambiguous as to how editing a private field will affect the data.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changing-the-address-book-s-privacy-level"><a class="link" href="#changing-the-address-book-s-privacy-level">3.11. Changing the address book&#8217;s privacy level</a></h3>
<div class="paragraph">
<p><code>PrivacyLevelCommand</code> allows the user to change the privacy level of Address++, letting users easily reveal data hidden by private fields, or hide persons containing private fields entirely.</p>
</div>
<div class="paragraph">
<p>The sequence diagram for <code>PrivacyLevelCommand</code> is illustrated below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/PrivacyLevelSequenceDiagram.png" alt="PrivacyLevelSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.9.1 : Sequence Diagram for changing the privacy level of the address book</em></p>
</div>
<div class="paragraph">
<p><code>PrivacyLevelCommandParser</code> will accept any integer that is input in the command line, and create a <code>PrivacyLevelCommand</code> that stores the integer, which represents the privacy level to switch to.</p>
</div>
<div class="paragraph">
<p>Upon execution,<code>PrivacyLevelCommand</code> will first check if the integer falls within the range of the minimum and maximum privacy level. If it does not, a new <code>CommandException</code> is thrown, reminding the user of the valid input levels.</p>
</div>
<div class="paragraph">
<p>If the integer is within the valid range, <code>PrivacyLevelCommand</code> will update the privacy level of <code>Model</code>. Following that, it will proceed to update the privacy level of each person.</p>
</div>
<div class="paragraph">
<p><code>Model</code>, each <code>Person</code> and each field that can be set as private all contain a <code>privacyLevel</code> variable to indicate the current privacy level. This value should remain the same between all of these objects throughout the operation of Address++.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/PersonClassDiagramPrivacyLevel.png" alt="PersonClassDiagramPrivacyLevel" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.9.2 : Class Diagram of Person, which shows which classes contain an integer to indicate the privacy level</em></p>
</div>
<div class="paragraph">
<p>Finally, depending on the privacy level, <code>PrivacyLevelCommand</code> will update the call <code>model.updateFilteredPersonList()</code> with the appropriate predicate.</p>
</div>
<div class="paragraph">
<p>This process is illustrated in the code snippet below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> CommandResult execute() <span class="directive">throws</span> CommandException {
    requireNonNull(model);
    <span class="keyword">if</span> (level &lt; MIN_PRIVACY_LEVEL || level &gt; MAX_PRIVACY_LEVEL) {
        <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(WRONG_PRIVACY_LEVEL_MESSAGE);
    }
    model.setPrivacyLevel(level);
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; model.getAddressBook().getPersonList().size(); i++) {
        ReadOnlyPerson toReplace = model.getPersonAtIndexFromAddressBook(i);
        Person newPerson = <span class="keyword">new</span> Person(toReplace);
        newPerson.setPrivacyLevel(level);
        <span class="keyword">try</span> {
            model.updatePerson(toReplace, newPerson);
        } <span class="keyword">catch</span> (DuplicatePersonException e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(MESSAGE_DUPLICATE_PERSON);
        } <span class="keyword">catch</span> (PersonNotFoundException e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">AssertionError</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">The target person cannot be missing</span><span class="delimiter">&quot;</span></span>);
        }
    }
    <span class="keyword">if</span> (level == <span class="integer">3</span>) {
        model.updateFilteredPersonList(<span class="keyword">new</span> ShowAllPrivacyLevelPredicate());
    } <span class="keyword">else</span> {
        model.updateFilteredPersonList(Model.PREDICATE_SHOW_ALL_PERSONS);
    }
    <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(<span class="predefined-type">String</span>.format(CHANGE_PRIVACY_LEVEL_SUCCESS, <span class="predefined-type">Integer</span>.toString(level)));
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations-10"><a class="link" href="#design-considerations-10">3.11.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Storing of the privacy level<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Have each relevant class store a privacy level integer.<br>
<strong>Pros:</strong> Less coupling, less modification of existing code required. <br>
<strong>Cons:</strong> Have to modify every relevant object every time <code>PrivacyLevelCommand</code> is called. Runs the risk that an object may accidentally not have its privacy level modified to match the other objects if privacy levels are not properly updated.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Store the privacy level in the model and have any object that needs to check it query from model.<br>
<strong>Pros:</strong> Only one integer needs to be modified for the privacy level of the entire address book to change, which also eliminates any possibility that privacy level may be different when used by different objects.<br>
<strong>Cons:</strong> Increases coupling, classes such as Name will need to have a Model object as one of its variables to access Model. Large scale modification of existing code and tests are necessary.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="locating-a-person-on-google-maps"><a class="link" href="#locating-a-person-on-google-maps">3.12. Locating a Person on Google Maps</a></h3>
<div class="paragraph">
<p>Locating a person&#8217;s address allows users to take the address that is stored by a person and search it on Google Maps in the browser.</p>
</div>
<div class="paragraph">
<p>Upon calling the <code>locate</code> command, <code>LocateCommandParser</code> will parse the input string into an <code>Index</code>, and create a new <code>LocateCommand</code>. Should the arguments be a non-integer, a <code>ParseException</code> will be thrown.<br>
This can be seen from the code snippet below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="directive">public</span> LocateCommand parse(<span class="predefined-type">String</span> args) <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="keyword">try</span> {
        Index index = ParserUtil.parseIndex(args);
        <span class="keyword">return</span> <span class="keyword">new</span> LocateCommand(index);
    } <span class="keyword">catch</span> (IllegalValueException ive) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(
                <span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT, LocateCommand.MESSAGE_USAGE));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon execution of <code>LocateCommand</code>, it will search the <code>Model</code> for the <code>Person</code> at the input <code>Index</code>. If the <code>Index</code> is out of range of the list of persons, a <code>CommandException</code> will be thrown.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>LocateCommand</code> will post a new <code>BrowserPanelLocateEvent</code> and pass in the <code>Person</code> found to that event. It will then return a <code>CommandResult</code> indicating the success of its execution.</p>
</div>
<div class="paragraph">
<p>This code for this can be found below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> CommandResult execute() <span class="directive">throws</span> CommandException {

    <span class="predefined-type">List</span>&lt;ReadOnlyPerson&gt; lastShownList = model.getFilteredPersonList();

    <span class="keyword">if</span> (targetIndex.getZeroBased() &gt;= lastShownList.size()) {
        <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(Messages.MESSAGE_INVALID_PERSON_DISPLAYED_INDEX);
    }

    EventsCenter.getInstance().post(<span class="keyword">new</span> BrowserPanelLocateEvent(
            model.getFilteredPersonList().get(targetIndex.getZeroBased())));
    <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(<span class="predefined-type">String</span>.format(MESSAGE_LOCATE_PERSON_SUCCESS, targetIndex.getOneBased()));

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>BrowserPanel will then use <code>handleBrowserPanelLocationEvent</code> to process this newly created event. It will call <code>loadMapsPage</code>, which will check if the <code>Person&#8217;s `Address</code> is private or not. If their <code>Address</code> is public, it will launch the browser, showing the <code>Address</code> of that <code>Person</code> on Google Maps. Otherwise, an error message will be printed, as can be seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="directive">private</span> <span class="type">void</span> loadMapsPage(ReadOnlyPerson person) {
    <span class="keyword">if</span> (person.getAddress().isPrivate()) {
        raise(<span class="keyword">new</span> NewResultAvailableEvent(PRIVATE_ADDRESS_CANNOT_SEARCH));
    } <span class="keyword">else</span> {
        loadPage(GOOGLE_MAPS_URL_PREFIX + person.getAddress().toString().replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>)
            + GOOGLE_MAPS_URL_SUFFIX);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The overall sequence of events is illustrated by the following sequence diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/LocateSequenceDiagram.png" alt="LocateSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.10.1 : Sequence Diagram for Locating a Person&#8217;s Address</em></p>
</div>
<div class="sect3">
<h4 id="design-considerations-11"><a class="link" href="#design-considerations-11">3.12.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of the Google Maps to search for a person&#8217;s <code>Address</code><br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Create a separate command <code>locate</code>.<br>
<strong>Pros:</strong> No modification needed for existing commands, which makes it clear the purpose of each command.<br>
<strong>Cons:</strong> Additional commands will need to be learnt for both developers and users.<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Add the functionality into <code>SelectCommand</code>.<br>
<strong>Pros:</strong> Expands the utility of <code>SelectCommand</code> beyond performing a Google search on their name.<br>
<strong>Cons:</strong> Will require significant modification of existing code, and may make it more confusing for users.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="navigating-from-one-address-to-another-using-google-maps"><a class="link" href="#navigating-from-one-address-to-another-using-google-maps">3.13. Navigating from one address to another using Google Maps</a></h3>
<div class="paragraph">
<p>When the <code>navigate</code> command is entered into the command line, <code>NavigateCommandParse</code> will first reset its internal <code>from</code>, <code>to</code>, <code>fromIndex</code>, <code>toIndex</code> to null. It will then check for the input prefixes and ensure that only one of the prefixes from the group <code>fp/</code>, <code>ft/</code>, and <code>fa/</code>, which we will subsequently call the <code>from</code> prefixes are present. It then does the same with the prefixes from the group <code>tp/</code>, <code>tt/</code> and <code>ta/</code>, which we will call the <code>to</code> prefixes.<br></p>
</div>
<div class="paragraph">
<p>This is done by invoking the <code>checkFrom</code> and <code>checkTo</code> methods as can be seen from the code snippet below. For the example <code>checkFrom</code>, it takes in 3 booleans on whether or not each prefix is present and checks whether or not there is exactly one kind of <code>from</code> prefix. It throws an error if there are no <code>from</code> prefixes or more than one type of <code>from</code> prefixes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> checkFrom(ArgumentMultimap argumentMultimap, <span class="type">boolean</span> fromAddress, <span class="type">boolean</span> fromPerson, <span class="type">boolean</span> fromTask)
        <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="keyword">if</span> (!(fromAddress || fromPerson || fromTask)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(<span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT, NavigateCommand.MESSAGE_USAGE));
    } <span class="keyword">else</span> <span class="keyword">if</span> ((fromAddress &amp;&amp; (fromPerson || fromTask)) || (fromPerson &amp;&amp; fromTask)) {
        <span class="comment">// If 2 or more from prefixes are present</span>
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(NavigateCommand.MESSAGE_MULTIPLE_FROM_ERROR);
    } <span class="keyword">else</span> {
        <span class="keyword">try</span> {
            setArgsForNavigateCommand(argumentMultimap, fromAddress, fromPerson, <span class="predefined-constant">true</span>);
        } <span class="keyword">catch</span> (IllegalValueException e) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(e.getMessage(), e);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>checkFrom</code> calls <code>setArgsForNavigateCommand</code>, which sets the variables in the <code>NavigateCommandParser</code> to the appropriate values depending on whether the address originates from a person, a task or is a manual input by the user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> setArgsForNavigateCommand(ArgumentMultimap argumentMultimap, <span class="type">boolean</span> address, <span class="type">boolean</span> person, <span class="type">boolean</span> forFrom) <span class="directive">throws</span> IllegalValueException {
    <span class="keyword">if</span> (address) {
        <span class="keyword">if</span> (forFrom) {
            from = <span class="keyword">new</span> Location(ParserUtil.parseLocationFromAddress(
                    argumentMultimap.getValue(PREFIX_NAVIGATE_FROM_ADDRESS)).get().toString());
        } <span class="keyword">else</span> {
            to = <span class="keyword">new</span> Location(ParserUtil.parseLocationFromAddress(
                    argumentMultimap.getValue(PREFIX_NAVIGATE_TO_ADDRESS)).get().toString());
        }
    } <span class="keyword">else</span> <span class="keyword">if</span> (person) {
        <span class="keyword">if</span> (forFrom) {
            fromIndex = ParserUtil.parseIndex(argumentMultimap
                    .getValue(PREFIX_NAVIGATE_FROM_PERSON).get());
        } <span class="keyword">else</span> {
            toIndex = ParserUtil.parseIndex(argumentMultimap
                    .getValue(PREFIX_NAVIGATE_TO_PERSON).get());
        }
    } <span class="keyword">else</span> {
        <span class="keyword">if</span> (forFrom) {
            fromIndex = ParserUtil.parseIndex(argumentMultimap
                    .getValue(PREFIX_NAVIGATE_FROM_TASK).get());
        } <span class="keyword">else</span> {
            toIndex = ParserUtil.parseIndex(argumentMultimap
                    .getValue(PREFIX_NAVIGATE_TO_TASK).get());
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, <code>NavigateCommandParser</code> will create a new <code>NavigateCommand</code> based on the inputs as set by <code>setArgsForNavigateCommand</code>.</p>
</div>
<div class="paragraph">
<p>When <code>NavigateCommand</code> is created, it first checks if there are duplicate <code>from</code> or <code>to</code> addresses that are passed into it and throws an error if that is the case.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> checkDuplicateFromAndToLocation(Location locationFrom, Location locationTo, Index fromIndex, Index toIndex) <span class="directive">throws</span> <span class="exception">IllegalArgumentException</span> {
    <span class="keyword">if</span> (locationFrom != <span class="predefined-constant">null</span> &amp;&amp; fromIndex != <span class="predefined-constant">null</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(MESSAGE_MULTIPLE_FROM_ERROR);
    }
    <span class="keyword">if</span> (locationTo != <span class="predefined-constant">null</span> &amp;&amp; toIndex != <span class="predefined-constant">null</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(MESSAGE_MULTIPLE_TO_ERROR);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If it passes this check, <code>NavigateCommand</code> stores <code>fromLocation</code> and <code>toLocation</code>, which are the Locations of any manually added address by the user to navigate from and to respectively. It also stores <code>toIndex</code> and <code>fromIndex</code>, which are the Indexes of the <code>Person</code> or <code>Task</code> to extract the address from as well as <code>toIsTask</code> and <code>fromIsTask</code>, which are booleans that indicate whether <code>toIndex</code> and <code>fromIndex</code> are indexes of Persons or Tasks.</p>
</div>
<div class="paragraph">
<p>Upon execution of <code>NavigateCommmand</code>, it will first check if it has a non-null <code>fromIndex</code>, if it does, it will create a new Location based on its <code>fromIndex</code> and <code>fromIsTask</code> values using the <code>setLocationByIndex</code> method. Otherwise, it will set the Location to be the Location in <code>locationfrom</code>. This can be seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">if</span> (fromIndex != <span class="predefined-constant">null</span>) {
    <span class="keyword">try</span> {
        from = setLocationByIndex(fromIndex, fromIsTask);
    } <span class="keyword">catch</span> (IllegalValueException e) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">IllegalArgumentException</span>(MESSAGE_PRIVATE_PERSON_ADDRESS_ERROR);
    }
} <span class="keyword">else</span> {
    from = locationFrom;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>setLocationByIndex throws CommandException if the target Person or Task does not have a valid Address to extract due to the Address being blank, or it being private.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="directive">private</span> Location setLocationByIndex(Index index, <span class="type">boolean</span> isTask) <span class="directive">throws</span> IllegalValueException, CommandException {
    <span class="keyword">if</span> (isTask) {
        <span class="keyword">if</span> (model.getFilteredTaskList().get(index.getZeroBased()).getTaskAddress().toString().equals(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(<span class="predefined-type">String</span>.format(MESSAGE_TASK_HAS_NO_ADDRESS_ERROR, index.getOneBased()));
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> <span class="keyword">new</span> Location(model.getFilteredTaskList().get(index.getZeroBased()).getTaskAddress().toString());
        }
    } <span class="keyword">else</span> {
        <span class="keyword">if</span> (model.getFilteredPersonList().get(index.getZeroBased()).getAddress().toString().equals(<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(<span class="predefined-type">String</span>.format(MESSAGE_PERSON_HAS_NO_ADDRESS_ERROR, index.getOneBased()));
        } <span class="keyword">else</span> <span class="keyword">if</span> (model.getFilteredPersonList().get(index.getZeroBased()).getAddress().getIsPrivate()) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(<span class="predefined-type">String</span>.format(MESSAGE_PRIVATE_PERSON_ADDRESS_ERROR, index.getOneBased()));
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> <span class="keyword">new</span> Location(model.getFilteredPersonList().get(index.getZeroBased())
                    .getAddress().toString());
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>NavigateCommand</code> does the same for the Address to navigate <code>To</code> and posts a new <code>BrowserPanelNavigateEvent</code>, passing in the <code>Location</code> to navigate <code>From</code> and the <code>Location</code> to navigate <code>To</code>.<br>
<code>NavigateCommand</code> will then create a new <code>CommandResult</code> to indicate a successful <code>Command</code>.</p>
</div>
<div class="paragraph">
<p><code>BrowserPanel</code> will then get the information from this <code>BrowserPanelNavigateEvent</code>, and load the appropriate Google Maps URL after replacing information such as the Unit Number and extra whitespaces. This has to be done as Google Maps does not function properly with Unit Numbers or spaces in its URL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> loadDirectionsPage(<span class="predefined-type">String</span> fromLocation, <span class="predefined-type">String</span> toLocation) {
    loadPage(GOOGLE_MAPS_DIRECTIONS_PREFIX + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;origin=</span><span class="delimiter">&quot;</span></span>
            + fromLocation.replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">#(</span><span class="char">\\</span><span class="content">w+)</span><span class="char">\\</span><span class="content">s*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>)
            .replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">-(</span><span class="char">\\</span><span class="content">w+)</span><span class="char">\\</span><span class="content">s*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">&amp;destination=</span><span class="delimiter">&quot;</span></span>
            + toLocation.replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">#(</span><span class="char">\\</span><span class="content">w+)</span><span class="char">\\</span><span class="content">s*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>).replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">+</span><span class="delimiter">&quot;</span></span>)
            .replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">-(</span><span class="char">\\</span><span class="content">w+)</span><span class="char">\\</span><span class="content">s*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>)
            + GOOGLE_MAPS_DIRECTIONS_SUFFIX);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The overall sequence of events is illustrated by the following sequence diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/NavigateSequenceDiagram.png" alt="NavigateSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.11.1 : Sequence Diagram for Navigating from one Address to another</em></p>
</div>
<div class="sect3">
<h4 id="design-considerations-12"><a class="link" href="#design-considerations-12">3.13.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> How to pass the appropriate information to NavigateCommand<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Have a constructor that takes in a large number of arguments so that NavigateCommand can correctly identify what kind of Location to post in BrowserPanelNavigateEvent.<br>
<strong>Pros:</strong> Only 1 constructor needed.<br>
<strong>Cons:</strong> Additional methods will be needed to properly identify which Location to use for navigation. <br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Create many constructors to segregate the different possible scenarios that might happen.<br>
<strong>Pros:</strong> It is clear what information to use to generate the Locations<br>
<strong>Cons:</strong> Requires large numbers of constructors to be created, easy for mistakes to occur as Constructors all share the same name but different argument types.</p>
</div>
<div class="paragraph">
<p><strong>Aspect:</strong> How to transfer information of the address from one class to another<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Wrap the address in a <code>Location</code> class before posting the BrowserPanelNavigateEvent.<br>
<strong>Pros:</strong> Only Locations, which indicates that the address is properly parsed, will be passed for the BrowserPanel to read, reducing the possibility of BrowserPanel reading stray unwanted strings as addresses to navigate to and from. The value stored inside each Location cannot be altered once that Location object has been created.<br>
<strong>Cons:</strong> A new class has to be created and Strings, Addresses and TaskAddresses will need to be converted to Locations first. <br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Simply pass on a String containing the address from class to class<br>
<strong>Pros:</strong> Easy to read and transfer information, lower overhead<br>
<strong>Cons:</strong> It is easier for stray Strings to pollute the information, and the Strings can be unintentionally modified.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="opening-and-saving-of-the-xml-save-file"><a class="link" href="#opening-and-saving-of-the-xml-save-file">3.14. Opening and Saving of the .xml save file</a></h3>
<div class="paragraph">
<p>Both <code>OpenCommand</code> and <code>SaveAsCommand</code> function in a very similar way.
When <code>open</code> or <code>save</code> is input by the user, <code>AddressBookParser</code> will create a new <code>OpenCommand</code> or <code>SaveAsCommand</code>.</p>
</div>
<div class="paragraph">
<p>These two commands will then post a new <code>OpenRequestEvent</code> or a new <code>SaveAsRequestEvent</code> and return a successful <code>CommandResult</code>.</p>
</div>
<div class="paragraph">
<p><code>MainWindow</code> will have two methods, <code>HandleOpenRequestEvent</code> and <code>HandleSaveAsRequestEvent</code> that subscribe to the above two events and will call <code>handleOpen</code> and <code>handleSaveAs</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> handleOpen() <span class="directive">throws</span> <span class="exception">IOException</span>, DataConversionException {
    <span class="comment">// Set extension filter</span>
    FileChooser.ExtensionFilter extFilter = <span class="keyword">new</span> FileChooser.ExtensionFilter(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">XML files (*.xml)</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">*.xml</span><span class="delimiter">&quot;</span></span>);
    fileChooser.getExtensionFilters().add(extFilter);

    <span class="comment">// Show open file dialog</span>
    <span class="predefined-type">File</span> file = fileChooser.showOpenDialog(primaryStage);
    <span class="keyword">if</span> (file != <span class="predefined-constant">null</span>) {
        <span class="comment">// Change file path to the opened file</span>
        storage.changeFilePath(file.getPath(), prefs);
        <span class="comment">// Reset data in the model to the data from the opened file</span>
        model.resetData(XmlFileStorage.loadDataFromSaveFile(file));
        <span class="comment">// Update the UI</span>
        fillInnerParts();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> handleSaveAs() <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="comment">// Set extension filter</span>
    FileChooser.ExtensionFilter extFilter = <span class="keyword">new</span> FileChooser.ExtensionFilter(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">XML files (*.xml)</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">*.xml</span><span class="delimiter">&quot;</span></span>);
    fileChooser.getExtensionFilters().add(extFilter);

    <span class="comment">// Show save file dialog</span>
    <span class="predefined-type">File</span> file = fileChooser.showSaveDialog(primaryStage);

    <span class="keyword">if</span> (file != <span class="predefined-constant">null</span>) {
        <span class="comment">// Make sure it has the correct extension</span>
        <span class="keyword">if</span> (!file.getPath().endsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">.xml</span><span class="delimiter">&quot;</span></span>)) {
            file = <span class="keyword">new</span> <span class="predefined-type">File</span>(file.getPath() + <span class="string"><span class="delimiter">&quot;</span><span class="content">.xml</span><span class="delimiter">&quot;</span></span>);
        }
        <span class="comment">// Change file path to the new save file</span>
        storage.changeFilePath(file.getPath(), prefs);
        <span class="comment">// Save the address book data and the user preferences</span>
        storage.saveAddressBook(model.getAddressBook());
        storage.saveUserPrefs(prefs);
        <span class="comment">// Update the UI</span>
        fillInnerParts();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>handleOpen</code> and <code>handleSaveAs</code> will create a new <code>FileChooser</code> extension filter that only allows the pop-up window to save files and load files in the .xml format.</p>
</div>
<div class="paragraph">
<p>Upon successfully selecting a file to load or a location to save as in the pop-up window, both methods will call <code>changefilepath</code> in <code>Storage</code> to the selected file path.</p>
</div>
<div class="paragraph">
<p>Finally, both commands diverge as <code>handleOpen</code> will call <code>resetData</code> to reset the data using the new save file, while <code>handleSaveAs</code> will call <code>saveAddressBook</code> and <code>saveUserPrefs</code> to save the data. Both methods will finally call <code>fillInnerParts()</code> to refresh the data displayed on the UI.</p>
</div>
<div class="paragraph">
<p>This process is illustrated using the sequence diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/OpenSequenceDiagram.png" alt="OpenSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.12.1 : Sequence Diagram for Opening a save file</em></p>
</div>
<div class="sect3">
<h4 id="design-considerations-13"><a class="link" href="#design-considerations-13">3.14.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> How does <code>OpenCommand</code> and <code>SaveAsCommand</code> determine the file location to save or load the save file from<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 1 (current choice):</strong> Open a <code>FileChooser</code> window, allowing the user to move through their file directory to acquire their save location and to select the name of the save file.<br>
<strong>Pros:</strong> User friendly, many other applications function similarly when saving and loading. Easier to implement and use as part of the dropdown menu in the User Interface.<br>
<strong>Cons:</strong> Not entirely command line based. <br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Input the file directory and file name to save or load from as part of the command.<br>
<strong>Pros:</strong> Entirely command line based, may be more preferable for users who prefer using the command line.<br>
<strong>Cons:</strong> Requires more complex code. Command must check if the file location to save or load from is valid, and that there is a valid file of that name.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="changing-the-theme-of-the-address-book"><a class="link" href="#changing-the-theme-of-the-address-book">3.15. Changing the theme of the address book</a></h3>
<div class="paragraph">
<p>The original style of the address book may not be for everyone. <code>ThemeCommand</code> allows users to switch between multiple preset themes.</p>
</div>
<div class="paragraph">
<p><code>ThemeCommandParser</code> trims the arguments after the word <code>theme</code> in the command line, removing any whitespaces leading up to and following that word. If the entire String ended up trimmed, then <code>ThemeCommandParser</code> will throw a <code>ParseException</code>. Otherwise, it creates a new <code>ThemeCommand</code>, passing in the trimmed word as seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> ThemeCommand parse(<span class="predefined-type">String</span> args) <span class="directive">throws</span> <span class="exception">ParseException</span> {
    <span class="predefined-type">String</span> trimmed = args.trim();
    <span class="keyword">if</span> (trimmed.isEmpty() || trimmed == <span class="predefined-constant">null</span>) {
        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(<span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT, ThemeCommand.MESSAGE_USAGE));
    } <span class="keyword">else</span> {
        <span class="keyword">return</span> <span class="keyword">new</span> ThemeCommand(trimmed);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When initialising the Address Book, the <code>AddressBook</code> class will create a <code>HashMap&lt;String, String&gt;</code> to store the keys and values of the themes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="type">void</span> initialiseStyleMap() {
    styleMap.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">dark</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">DarkTheme.css</span><span class="delimiter">&quot;</span></span>);
    styleMap.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">Dark</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">DarkTheme.css</span><span class="delimiter">&quot;</span></span>);
    styleMap.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">light</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">LightTheme.css</span><span class="delimiter">&quot;</span></span>);
    styleMap.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">Light</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">LightTheme.css</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The keys correspond to the possible user inputs, such as <code>light</code> or <code>dark</code>, while the values contain the filepath of the .css files, such as <code>DarkTheme.css</code>. This way, users do not need to remember and will not have to know what the .css files are like to use the theme command.</p>
</div>
<div class="paragraph">
<p>On executing <code>ThemeCommand</code>, it first checks if the input string can be found in the set of keys in the HashMap contained by the <code>AddressBook</code> class. If it cannot be found, or if the value corresponding to the input string is identical to that of the value of the file path of the .css file stored in Model, then a <code>CommandException</code> is thrown, as users cannot change to a non-existent theme, or a theme that is already in use.</p>
</div>
<div class="paragraph">
<p>If the string is valid, <code>ThemeCommand</code> will post a <code>ChangeThemeRequestEvent</code> and set the theme to the new file path corresponding to the input String in <code>Model</code>. <code>Model</code> will then continue on to set the theme in <code>UserPrefs</code> as well, so that it can be loaded on starting the application.</p>
</div>
<div class="paragraph">
<p><code>MainWindow</code> contains a method <code>handleChangeThemeEvent</code> that subscribes to the <code>ChangeThemeRequestEvent</code>. <code>handleChangeThemeEvent</code> calls <code>handlChangeTheme</code>, which first checks if there is an existing theme, if there is, it removes it, then sets adds the new theme through the file path that was passed to it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> handleChangeTheme(<span class="predefined-type">String</span> theme) {
    <span class="keyword">if</span> (getRoot().getStylesheets().size() &gt; <span class="integer">1</span>) {
         getRoot().getStylesheets().remove(<span class="integer">1</span>);
     }
     getRoot().getStylesheets().add(VIEW_PATH + theme);
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>After all is done, <code>ThemeCommand</code> returns a <code>CommandResult</code>, indicating the success of the command.
The overall execution of <code>ThemeCommand</code> is seen in the following code snippet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> CommandResult execute() <span class="directive">throws</span> CommandException {
    requireNonNull(model);

    <span class="predefined-type">String</span> styleSheet;

    <span class="keyword">if</span> (model.getStyleMap().containsKey(style)) {
        styleSheet = model.getStyleMap().get(style);
    } <span class="keyword">else</span> {
        <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(<span class="predefined-type">String</span>.format(MESSAGE_THEME_NOT_AVAILABLE, style));
    }

    <span class="keyword">if</span> (model.getTheme().equals(styleSheet)) {
        <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(<span class="predefined-type">String</span>.format(MESSAGE_THEME_IN_USE, style));
    }

    EventsCenter.getInstance().post(<span class="keyword">new</span> ChangeThemeRequestEvent(styleSheet));
    model.setTheme(styleSheet);
    <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(<span class="predefined-type">String</span>.format(MESSAGE_THEME_CHANGE_SUCCESS, style));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sequence diagram for the whole process is show below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ThemeSequenceDiagram.png" alt="ThemeSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.13.1 : Sequence Diagram for Changing Themes</em></p>
</div>
<div class="sect3">
<h4 id="design-considerations-14"><a class="link" href="#design-considerations-14">3.15.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Getting the correct file path to the .css file<br>
<strong>Alternative 1 (current choice):</strong> Store the file path in a HashMap, where the keys are the possible inputs that the user may type and the values are the actual filepaths<br>
<strong>Pros:</strong> Easier on the user. They do not need to remember any complicated .css names or file paths, and the input string can be customisable by changing the names of the keys added to the HashMap.<br>
<strong>Cons:</strong> Slightly more work needed to initialise the HashMap and check if the file paths are valid.<br>
<strong>Alternative 2:</strong> Change the name of the .css file and file paths such that what the user directly inputs can correspond to the actual .css file.<br>
<strong>Pros:</strong> A HashMap is no longer needed, instead, the input string just needs to be parsed to be turned into a file path. This makes it easier to add additional .css files, as developers do not have to keep modifying the initialisation of the HashMap<br>
<strong>Cons:</strong> Less flexibility in naming the file, user may break the code if they realise the input string directly used as part of the file path.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="add-delete-tag-mechanism"><a class="link" href="#add-delete-tag-mechanism">3.16. Add/Delete Tag mechanism</a></h3>
<div class="paragraph">
<p>The add/delete tag mechanism is facilitated by <code>personArrayList</code>, which resides inside <code>LogicManager</code>. It supports add/delete
tag for all persons in the address book. This command will inherit from <code>UndoableCommand</code>.</p>
</div>
<div class="paragraph">
<p>The add/delete tag command are executed by <code>AddTagCommand</code> and <code>DeleteTagCommand</code> are parsed through <code>AddTagCommandParser</code> and <code>DeleteTagCommandParser</code>.
It is different from <code>edit [INDEX] [TAG]</code> since it allows the user to perform the addition and deletion of tags for multiple people at once.
If the user wants to add the <code>t/friends</code> tag for the first 3 persons in the address book, the <code>AddTagCommand</code> (<code>add tag/ 1 2 3 t/friends</code>) will be executed.
The same operation will happen for <code>delete tag/</code> command.</p>
</div>
<div class="paragraph">
<p>The <code>AddTagCommand</code> goes through all the persons in the address book and add tag to the persons with specific index. The <code>DeleteTagCommand</code> works
in a similar way.</p>
</div>
<div class="paragraph">
<p>The example of how <code>AddTagCommand</code> is working:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
 * Adds a tag to the persons in the list from the address book.
 */</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">AddTagCommand</span> <span class="directive">extends</span> AddCommand {
    <span class="comment">/**
         * Check whether the index within the range then checks whether the specific persons have the tag.
         * If not, add the tag to the person that doesn't have the given tag.
         */</span>
        <span class="annotation">@Override</span>
        <span class="directive">public</span> CommandResult executeUndoableCommand() <span class="directive">throws</span> CommandException {

            <span class="keyword">for</span> (Index targetIndex : targetIndexes) {
                <span class="comment">// check whether the index within the range</span>
            }
            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; targetIndexes.size(); i++) {
                <span class="comment">// check whether all persons have the given tag</span>
            }
            <span class="comment">// throw exception for duplicated tag</span>
            <span class="keyword">return</span> <span class="keyword">new</span> CommandResult();
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Suppose the user enter the <code>add tag/ 1 2 t/friends</code> command. The following sequence diagram shows how the add tag command works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/AddTagSdForLogic.png" alt="AddTagSdForLogic" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.8.1 : Add Tag Sequence Diagram for Logic</em><br>
The <code>delete tag/</code> command works the same as <code>add tag/</code> command with different name only.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the input index does not exist, the <code>AddTagCommand</code> and <code>DeleteTagCommand</code> will throw an exception.<br>
If the tag to be deleted does not exist, the <code>DeleteTagCommand</code> will throw an exception.<br>
If the tag to be added exists in every target person in the address book, the <code>AddTagCommand</code> will throw an exception.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="design-considerations-15"><a class="link" href="#design-considerations-15">3.16.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of the <code>add tag/</code> and <code>delete tag/</code><br>
<strong>Alternative 1 (current choice):</strong> implement the methods in <code>ModelManager</code><br>
<strong>Pros:</strong> Easier to implement. <code>ModelManager</code> includes all the methods and variables.<br>
<strong>Cons:</strong> Must modify <code>Model</code> also to fit the <code>ModelManager</code>. Beginner may have difficulty to understand the different functions in Model component+</p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Implement the <code>addtag</code> and <code>deletetag</code> in <code>AddTagCommand</code> and <code>DeleteTagCommand</code> respectively.<br>
<strong>Pros:</strong> Easier to understand.<br>
<strong>Cons:</strong> Repetitive code. Additional overload constructor needs to be implement. The <code>AddTagCommand</code> and <code>DeleteTagCommand</code> will have to update the person list.
This violates the Single Responsibility Principle.</p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of the <code>AddTagCommand</code> and <code>DeleteTagCommand</code><br>
<strong>Alternative 1 (current choice):</strong> create new command <code>add tag/</code> and <code>delete tag/</code><br>
<strong>Pros:</strong> Less modification of existing command and parser<br>
<strong>Cons:</strong> Users have to learn how to use the additional commands<br></p>
</div>
<div class="paragraph">
<p><strong>Alternative 2:</strong> Modify the existing <code>add</code> and <code>delete</code> command<br>
<strong>Pros:</strong> Users could use the same commands to achieve different purpose<br>
<strong>Cons:</strong> Additional override the constructor for the existing command. It might not be easy for the beginner.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="find-tag-mechanism"><a class="link" href="#find-tag-mechanism">3.17. Find Tag mechanism</a></h3>
<div class="paragraph">
<p>The find tag mechanism is facilitated by an ArrayList of Tags, which resides inside <code>LogicManager</code>. It supports finding persons by their tags in the address book.
This command will not inherit from <code>UndoableCommand</code>.</p>
</div>
<div class="paragraph">
<p>The <code>find tag/</code> command is executed by <code>FindTagCommand</code> and is parsed through <code>FindTagCommandParser</code>.
After parsing through <code>FindTagCommandParser</code>, it does not goes to the <code>FindTagCommand</code> straightly. The list of tags input will be processed by <code>NameContainsTagsPredicate</code> first.
It is similar to the <code>find</code> command since find persons through their names and find persons through their tags are quite similar.</p>
</div>
<div class="paragraph">
<p>Please take not that although <code>FindTagCommand</code> is similar to <code>FindCommand</code>, there are still some differences.
<code>FindTagCommand</code> provides exclusive finding whereas <code>FindCommand</code> does not. It is achieved in the <code>NameContainsTagsPredicate</code>.</p>
</div>
<div class="paragraph">
<p>This is the example of how <code>NameContainsTagsPredicate</code> is working:
Firstly, it will convert a Set of Tag to String.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span> convertTagToString(ReadOnlyPerson person) {
        <span class="predefined-type">Set</span>&lt;Tag&gt; personTags = person.getTags();
        <span class="predefined-type">StringBuilder</span> allTagNames = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
        <span class="keyword">for</span> (Tag tag : personTags) {
            allTagNames.append(tag.getTagName());
            allTagNames.append(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>);
        }
        <span class="keyword">return</span> allTagNames.toString().trim();
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>After having a list of string, it will then split strings into two ArrayList. One is for the tags we are looking for and another one
is for the tags to be excluded.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
     * Update the wantedTag and unwantedTag list
     * @param wantedTag list of tags to be searched
     * @param unwantedTag list of tags to not be searched
     */</span>
    <span class="directive">private</span> <span class="type">void</span> updateWantedTagUnwantedTag(<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; wantedTag, <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; unwantedTag) {
        <span class="keyword">for</span> (<span class="predefined-type">String</span> everyTag : tags) {
            <span class="keyword">if</span> (!everyTag.startsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">/not</span><span class="delimiter">&quot;</span></span>)) {
                wantedTag.add(everyTag);
            } <span class="keyword">else</span> {
                unwantedTag.add(everyTag.substring(<span class="integer">4</span>));
            }
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Lastly, it will return the result according to the user input.<br>
Suppose the user enter <code>find tag/ friends</code> command. The following sequence diagram shows how the find tag command works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/FindTagSequenceDiagram.png" alt="FindTagSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.14.1 : Find Tag Sequence Diagram for Logic</em><br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the input index tags do not exist, the <code>FindTagCommand</code> will give a empty list.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="design-considerations-16"><a class="link" href="#design-considerations-16">3.17.1. Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of the <code>find tag/</code><br>
<strong>Alternative 1 (current choice):</strong> implement a new command <code>find tag/</code><br>
<strong>Pros:</strong> Easier to implement. <code>find tag/</code> command will be similar to the <code>find</code> command.<br>
<strong>Cons:</strong> Must create <code>NameContainsTagsPredicate</code> in model. It does not fully utilize the existing <code>NameContainsKeywordsPredicate</code>.<br>
<strong>Alternative 2:</strong> Implement the <code>find tag/</code> in <code>FindCommand</code>.<br>
<strong>Pros:</strong> Easier for user. They do not have to memorize some many commands.<br>
<strong>Cons:</strong> The existing <code>FindCommand</code> will not only response for finding persons through names only. This Violates Single Responsibility Principle
and Separation of Concerns as FindCommand now needs to do two different things.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="favourite-unfavourite-person-mechanism"><a class="link" href="#favourite-unfavourite-person-mechanism">3.18. Favourite/Unfavourite Person mechanism</a></h3>
<div class="paragraph">
<p>To favourite a person is achieved by <code>FavouriteCommand</code>. It basically changes the value of the <code>favourite</code> status of a <code>Person</code> but there is no specific <code>Favourite</code> field for person.</p>
</div>
<div class="paragraph">
<p>In this sense, a boolean value needs to be created to store the favourite status of a contact. As <code>AddCommand</code> does not involve <code>favourite</code>, the default <code>favourite</code> status for every newly added <code>Person</code> is false.</p>
</div>
<div class="paragraph">
<p>The <code>favourite</code> status is a boolean value and it will be set as true through <code>FavouriteCommand</code>. Then, the target person will be updated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> CommandResult executeUndoableCommand() <span class="directive">throws</span> CommandException {

        <span class="predefined-type">List</span>&lt;ReadOnlyPerson&gt; lastShownList = model.getFilteredPersonList();

        <span class="comment">// throw invalid person index</span>

        <span class="comment">// update favourite status</span>
        ReadOnlyPerson personToFavourite = lastShownList.get(targetIndex.getZeroBased());
        Person editedPerson = <span class="keyword">new</span> Person(personToFavourite.getName(),
                personToFavourite.getPhone(), personToFavourite.getEmail(),
                personToFavourite.getAddress(), <span class="predefined-constant">true</span>,
                personToFavourite.getRemark(), personToFavourite.getAvatar(),
                personToFavourite.getTags());
        <span class="comment">// update target person</span>
        <span class="keyword">try</span> {
            model.updatePerson(personToFavourite, editedPerson);
        } <span class="keyword">catch</span> (DuplicatePersonException dpe) {
            <span class="comment">// throw exception</span>
        }
        model.updateFilteredPersonList(PREDICATE_SHOW_ALL_PERSONS);

        <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(<span class="predefined-type">String</span>.format(MESSAGE_FAVOURITE_PERSON_SUCCESS, personToFavourite));
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>FavouriteCommand</code> takes in an integer as its argument. The command is first being parsed in <code>AddressBookParser</code> to be identified as an instance of <code>FavouriteCommand</code>.
Then it is parsed by <code>FavouriteCommandParser</code> to parse the index. Invalid indexes will be handled by throwing an exception. This is how <code>FavouriteCommandParser</code> is implemented:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/**
     * Parses the given {@code String} of arguments in the context of the FavouriteCommand
     * and returns an FavouriteCommand object for execution.
     * @throws ParseException if the user input does not conform the expected format
     */</span>
    <span class="directive">public</span> FavouriteCommand parse(<span class="predefined-type">String</span> args) <span class="directive">throws</span> <span class="exception">ParseException</span> {
        <span class="keyword">try</span> {
            Index index = ParserUtil.parseIndex(args);
            <span class="keyword">return</span> <span class="keyword">new</span> FavouriteCommand(index);
        } <span class="keyword">catch</span> (IllegalValueException ive) {
            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">ParseException</span>(
                    <span class="predefined-type">String</span>.format(MESSAGE_INVALID_COMMAND_FORMAT, FavouriteCommand.MESSAGE_USAGE));
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how a <code>FavouriteCommand</code> is processed:<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/FavouriteSequenceDiagram.png" alt="FavouriteSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.15.1 : Favourite Sequence Diagram for Logic</em><br></p>
</div>
<div class="paragraph">
<p>To indicate that a person has been <code>favoured</code>, <code>PersonCard</code> is modified to contain a <code>favouriteLabel</code> that changes its appearance based on the <code>favourite</code> status of the person.
It will first detect the boolean favourite status of the person. If the person is a favourite contact, a heart will be shown.
The colours of the border and the background of the label are set to transparent, so that only the background picture, which is a heart, will be shown.</p>
</div>
<div class="sect3">
<h4 id="design-consideration"><a class="link" href="#design-consideration">3.18.1. Design Consideration</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Implementation of <code>favourite</code><br>
<strong>Alternative 1 (current choice):</strong> implement a new command <code>favourite</code>.<br>
<strong>Pros:</strong> Easier to implement. Does not need to modify existing command.<br>
<strong>Cons:</strong> Must modify <code>Person</code> class to update the person status. The constructor of <code>person</code> has been modified so all the <code>person</code> in the address book must change accordingly.<br>
<strong>Alternative 2:</strong> Implement the <code>favourite</code> in <code>AddCommand</code><br>
<strong>Pros:</strong> Easier for user. They do not have to memorize some many commands.<br>
<strong>Cons:</strong> Difficult to implement. The <code>favourite</code> status will be treated as an optional field when using <code>AddCommand</code>. In order to change <code>favourite</code> status, <code>EditCommand</code> may be modified which is very troublesome.<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Store <code>Favourite</code> values<br>
<strong>Alternative 1 (current choice):</strong> Store it as a <code>Boolean</code> value<br>
<strong>Pros:</strong> Easier to implement. Does not need to create another class.<br>
<strong>Cons:</strong> Must modify <code>Model</code> and <code>ModelManager</code> to update the person status.It is also prone to bugs when developers forget to change the ObjectProperty to <code>String</code> in UI classes.<br>
<strong>Alternative 2:</strong> Add a new <code>Favourite</code> field<br>
<strong>Pros:</strong> Similar way to store other personal information. It also follows the open-close principle and exercises cohesion, where all matters related to <code>Favourite</code> field is dealt in its own class.<br>
<strong>Cons:</strong> Difficult to implement. Adding a new field will cause many changes in UI, Logic, Model and Storage. Some test cases will be rewritten.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="logging"><a class="link" href="#logging">3.19. Logging</a></h3>
<div class="paragraph">
<p>We are using <code>java.util.logging</code> package for logging. The <code>LogsCenter</code> class is used to manage the logging levels and logging destinations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The logging level can be controlled using the <code>logLevel</code> setting in the configuration file (See <a href="#configuration">Configuration</a>)</p>
</li>
<li>
<p>The <code>Logger</code> for a class can be obtained using <code>LogsCenter.getLogger(Class)</code> which will log messages according to the specified logging level</p>
</li>
<li>
<p>Currently log messages are output through: <code>Console</code> and to a <code>.log</code> file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Logging Levels</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SEVERE</code> : Critical problem detected which may possibly cause the termination of the application</p>
</li>
<li>
<p><code>WARNING</code> : Can continue, but with caution</p>
</li>
<li>
<p><code>INFO</code> : Information showing the noteworthy actions by the App</p>
</li>
<li>
<p><code>FINE</code> : Details that is not usually noteworthy but may be useful in debugging e.g. print the actual list instead of just its size</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuration"><a class="link" href="#configuration">3.20. Configuration</a></h3>
<div class="paragraph">
<p>Certain properties of the application can be controlled (e.g App name, logging level) through the configuration file (default: <code>config.json</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="documentation"><a class="link" href="#documentation">4. Documentation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We use asciidoc for writing documentation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We chose asciidoc over Markdown because asciidoc, although a bit more complex than Markdown, provides more flexibility in formatting.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="editing-documentation"><a class="link" href="#editing-documentation">4.1. Editing Documentation</a></h3>
<div class="paragraph">
<p>See <a href="UsingGradle.html#rendering-asciidoc-files">UsingGradle.adoc</a> to learn how to render <code>.adoc</code> files locally to preview the end result of your edits.
Alternatively, you can download the AsciiDoc plugin for IntelliJ, which allows you to preview the changes you have made to your <code>.adoc</code> files in real-time.</p>
</div>
</div>
<div class="sect2">
<h3 id="publishing-documentation"><a class="link" href="#publishing-documentation">4.2. Publishing Documentation</a></h3>
<div class="paragraph">
<p>See <a href="UsingTravis.html#deploying-github-pages">UsingTravis.adoc</a> to learn how to deploy GitHub Pages using Travis.</p>
</div>
</div>
<div class="sect2">
<h3 id="converting-documentation-to-pdf-format"><a class="link" href="#converting-documentation-to-pdf-format">4.3. Converting Documentation to PDF format</a></h3>
<div class="paragraph">
<p>We use <a href="https://www.google.com/chrome/browser/desktop/">Google Chrome</a> for converting documentation to PDF format, as Chrome&#8217;s PDF engine preserves hyperlinks used in webpages.</p>
</div>
<div class="paragraph">
<p>Here are the steps to convert the project documentation files to PDF format.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Follow the instructions in <a href="UsingGradle.html#rendering-asciidoc-files">UsingGradle.adoc</a> to convert the AsciiDoc files in the <code>docs/</code> directory to HTML format.</p>
</li>
<li>
<p>Go to your generated HTML files in the <code>build/docs</code> folder, right click on them and select <code>Open with</code> &#8594; <code>Google Chrome</code>.</p>
</li>
<li>
<p>Within Chrome, click on the <code>Print</code> option in Chrome&#8217;s menu.</p>
</li>
<li>
<p>Set the destination to <code>Save as PDF</code>, then click <code>Save</code> to save a copy of the file in PDF format. For best results, use the settings indicated in the screenshot below.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chrome_save_as_pdf.png" alt="chrome save as pdf" width="300">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.6.1 : Saving documentation as PDF files in Chrome</em></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing"><a class="link" href="#testing">5. Testing</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="running-tests"><a class="link" href="#running-tests">5.1. Running Tests</a></h3>
<div class="paragraph">
<p>There are three ways to run tests.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The most reliable way to run tests is the 3rd one. The first two methods might fail some GUI tests due to platform/resolution-specific idiosyncrasies.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 1: Using IntelliJ JUnit test runner</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>To run all tests, right-click on the <code>src/test/java</code> folder and choose <code>Run 'All Tests'</code></p>
</li>
<li>
<p>To run a subset of tests, you can right-click on a test package, test class, or a test and choose <code>Run 'ABC'</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Method 2: Using Gradle</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open a console and run the command <code>gradlew clean allTests</code> (Mac/Linux: <code>./gradlew clean allTests</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="UsingGradle.html">UsingGradle.adoc</a> for more info on how to run tests using Gradle.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Method 3: Using Gradle (headless)</strong></p>
</div>
<div class="paragraph">
<p>Thanks to the <a href="https://github.com/TestFX/TestFX">TestFX</a> library we use, our GUI tests can be run in the <em>headless</em> mode. In the headless mode, GUI tests do not show up on the screen. That means the developer can do other things on the Computer while the tests are running.</p>
</div>
<div class="paragraph">
<p>To run tests in headless mode, open a console and run the command <code>gradlew clean headless allTests</code> (Mac/Linux: <code>./gradlew clean headless allTests</code>)</p>
</div>
</div>
<div class="sect2">
<h3 id="types-of-tests"><a class="link" href="#types-of-tests">5.2. Types of tests</a></h3>
<div class="paragraph">
<p>We have two types of tests:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>GUI Tests</strong> - These are tests involving the GUI. They include,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><em>System Tests</em> that test the entire App by simulating user actions on the GUI. These are in the <code>systemtests</code> package.</p>
</li>
<li>
<p><em>Unit tests</em> that test the individual components. These are in <code>seedu.address.ui</code> package.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>Non-GUI Tests</strong> - These are tests not involving the GUI. They include,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><em>Unit tests</em> targeting the lowest level methods/classes.<br>
e.g. <code>seedu.address.commons.StringUtilTest</code></p>
</li>
<li>
<p><em>Integration tests</em> that are checking the integration of multiple code units (those code units are assumed to be working).<br>
e.g. <code>seedu.address.storage.StorageManagerTest</code></p>
</li>
<li>
<p>Hybrids of unit and integration tests. These test are checking multiple code units as well as how the are connected together.<br>
e.g. <code>seedu.address.logic.LogicManagerTest</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="troubleshooting-testing"><a class="link" href="#troubleshooting-testing">5.3. Troubleshooting Testing</a></h3>
<div class="paragraph">
<p><strong>Problem: <code>HelpWindowTest</code> fails with a <code>NullPointerException</code>.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reason: One of its dependencies, <code>UserGuide.html</code> in <code>src/main/resources/docs</code> is missing.</p>
</li>
<li>
<p>Solution: Execute Gradle task <code>processResources</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-ops"><a class="link" href="#dev-ops">6. Dev Ops</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="build-automation"><a class="link" href="#build-automation">6.1. Build Automation</a></h3>
<div class="paragraph">
<p>See <a href="UsingGradle.html">UsingGradle.adoc</a> to learn how to use Gradle for build automation.</p>
</div>
</div>
<div class="sect2">
<h3 id="continuous-integration"><a class="link" href="#continuous-integration">6.2. Continuous Integration</a></h3>
<div class="paragraph">
<p>We use <a href="https://travis-ci.org/">Travis CI</a> and <a href="https://www.appveyor.com/">AppVeyor</a> to perform <em>Continuous Integration</em> on our projects. See <a href="UsingTravis.html">UsingTravis.adoc</a> and <a href="UsingAppVeyor.html">UsingAppVeyor.adoc</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="making-a-release"><a class="link" href="#making-a-release">6.3. Making a Release</a></h3>
<div class="paragraph">
<p>Here are the steps to create a new release.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update the version number in <a href="https://github.com/CS2103T-W09B2/addressbook-level4/src/main/java/seedu/address/MainApp.java"><code>MainApp.java</code></a>.</p>
</li>
<li>
<p>Generate a JAR file <a href="UsingGradle.html#creating-the-jar-file">using Gradle</a>.</p>
</li>
<li>
<p>Tag the repo with the version number. e.g. <code>v0.1</code></p>
</li>
<li>
<p><a href="https://help.github.com/articles/creating-releases/">Create a new release using GitHub</a> and upload the JAR file you created.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="managing-dependencies"><a class="link" href="#managing-dependencies">6.4. Managing Dependencies</a></h3>
<div class="paragraph">
<p>A project often depends on third-party libraries. For example, Address Book depends on the <a href="http://wiki.fasterxml.com/JacksonHome">Jackson library</a> for XML parsing. Managing these <em>dependencies</em> can be automated using Gradle. For example, Gradle can download the dependencies automatically, which is better than these alternatives.<br>
a. Include those libraries in the repo (this bloats the repo size)<br>
b. Require developers to download those libraries manually (this creates extra work for developers)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-stories"><a class="link" href="#user-stories">Appendix A: User Stories</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Priorities: High (must have) - <code>* * *</code>, Medium (nice to have) - <code>* *</code>, Low (unlikely to have) - <code>*</code></p>
</div>
<table class="tableblock frame-all grid-all" style="width: 59%;">
<colgroup>
<col style="width: 22%;">
<col style="width: 23%;">
<col style="width: 25%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">As a &#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">I want to &#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">So that I can&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">new user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">see usage instructions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">refer to instructions when I forget how to use the App</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">add a new person</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete a person</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">remove entries that I no longer need</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have a search function</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">easily search for the contact I am looking for without browsing through thousands of contacts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have the option to edit my created contacts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">make changes to the contacts that I have added</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error-prone user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have the ability to Undo and Redo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">automatically undo or redo the changes that I have made</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with secretive friends</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to add contacts with incomplete data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">operate without the need to create dummy values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hide <a href="#private-contact-detail">private contact details</a> by default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">minimize chance of someone else seeing them by accident</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">load contact data from any file of my choosing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have more flexibility for my file&#8217;s storage location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">save contact data in a directory of my choosing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">save the file in a location that fits my needs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">type commands partially and have the application fill in the rest for me</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">increase typing productivity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">first-time user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to see a user guide when I first start the program</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be clear on how to use it</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multi-tasking user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to record things other than contacts, such as tasks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">manage myself better</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to filter my contacts based on tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">view the people who are relevant to me</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">organized user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to sort my contacts by different fields such as by name and birthday</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">better organize my contacts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with multiple devices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to import and export my address book</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use the address book without having to add all my contacts when I switch platforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with many social media accounts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to add my contacts' social media accounts to the address book</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">improve connectivity and learn more about my contacts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user who values privacy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to to choose and modify which contacts and what information are to be displayed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hide information I do not want to share from others</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with a 4K screen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able keep track of my upcoming tasks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ditch my Todo application and migrate to Address++ for my people and task management needs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with many persons in the address book</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort persons by name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">locate a person easily</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">lazy user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have an easy way to add a person with his full details into my address book</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">add new contacts quickly</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user who values aesthetics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to customize my layout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">display self-identity, and use a layout that I like</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have the ability to add a short description to my contacts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">add more information about my contacts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long-time user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to access shortcut commands</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use the address book more efficiently</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non tech-savvy user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have the option to fill out certain fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use the address book without having to use the intimidating CLI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">error-prone user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">have minor typos auto corrected</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">continue using the address book without correcting my mistakes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to update the address book application easily when new updates are published</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">continue using the address book easily with any newly added features</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cautious user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to lock my address book application whenever I want with a password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">prevent people with malicious intent from making changes to my data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cautious user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to back up my address book data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">retrieve my back up data in the event I make breaking changes to my actual address book and there is no way of undoing them</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user with a 4K screen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to increase the font size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use the application without straining my eyes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* *</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">picky user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">be able to change the colour theme of the application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customize the application to suit my visual tastebuds.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="use-cases"><a class="link" href="#use-cases">Appendix B: Use Cases</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>(For all use cases below, the <strong>System</strong> is the <code>AddressBook</code> and the <strong>Actor</strong> is the <code>user</code>, unless specified otherwise)</p>
</div>
<h3 id="use-case-delete-person" class="discrete">Use case: Delete person</h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to list persons</p>
</li>
<li>
<p>AddressBook shows a list of persons</p>
</li>
<li>
<p>User requests to delete a specific person in the list</p>
</li>
<li>
<p>AddressBook deletes the person</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h3 id="use-case-search-for-person" class="discrete">Use case: Search for person</h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to search for a person with criteria</p>
</li>
<li>
<p>AddressBook shows a list of persons who match the criteria</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>2b. No such person was found.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>2b1. AddressBook informs the user that no matching users were found.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h3 id="use-case-edit-person" class="discrete">Use case: Edit person</h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to list persons</p>
</li>
<li>
<p>AddressBook shows a list of persons</p>
</li>
<li>
<p>User requests to change the details of a specific person in the list</p>
</li>
<li>
<p>AddressBook changes the details of the specified person.</p>
</li>
<li>
<p>AddressBook shows the new details of the person.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>3a. The given index is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>3b. The specified detail to change is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>3b1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 2.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>4a. The specified detail to change is exactly the same as the previous detail.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>4a1. AddressBook informs the user that no change was made.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h3 id="use-case-undo-redo-by-multiple-steps" class="discrete">Use case: Undo/Redo by multiple steps</h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to undo/redo a specified number of steps</p>
</li>
<li>
<p>AddressBook undos/redos the last X commands, where X was the number of commands to undo/redo</p>
</li>
<li>
<p>AddressBook displays a success message</p>
</li>
<li>
<p>AddressBook displays a list of all the commands that were undone/redone.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The number of commands entered were less than the specified number of undo commands.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>2a1. AddressBook undos all previous commands.</p>
<div class="paragraph">
<p>Use case resumes at step 3.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2b. The number of commands entered were less than the specified number of redo commands.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>2b1. AddressBook redos all previously undone commands.</p>
<div class="paragraph">
<p>Use case resumes at step 3</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<h3 id="use-case-sort" class="discrete">Use case: Sort</h3>
<div class="paragraph">
<p><strong>MSS</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>User requests to sort by a criteria</p>
</li>
<li>
<p>AddressBook sorts the contacts by the criteria</p>
</li>
<li>
<p>AddressBook shows a success message.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Extensions</strong></p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p>2a. The list is empty.</p>
<div class="paragraph">
<p>Use case ends.</p>
</div>
</li>
<li>
<p>1a. The given criteria is invalid.</p>
<div class="ulist none">
<ul class="none">
<li>
<p>1a1. AddressBook shows an error message.</p>
<div class="paragraph">
<p>Use case resumes at step 1.</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="non-functional-requirements"><a class="link" href="#non-functional-requirements">Appendix C: Non Functional Requirements</a></h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Should work on any <a href="#mainstream-os">mainstream OS</a> as long as it has Java <code>1.8.0_60</code> or higher installed.</p>
</li>
<li>
<p>Should be able to hold up to 1000 persons without a noticeable sluggishness in performance for typical usage.</p>
</li>
<li>
<p>A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.</p>
</li>
<li>
<p>Feature sets are to be rolled out on a regular weekly basis, following the proper forking workflow procedure.</p>
</li>
<li>
<p>The application should be intuitive the target users: students (and professionals) who prefer typing over using the mouse.</p>
</li>
<li>
<p>Future versions of the application should be backwards compatible with data saved in versions after v1.0.</p>
</li>
<li>
<p>The application is not required to handle physical printing.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="glossary"><a class="link" href="#glossary">Appendix D: Glossary</a></h2>
<div class="sectionbody">
<div id="mainstream-os" class="paragraph">
<p>Mainstream OS</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Windows, Linux, Unix, OS-X</pre>
</div>
</div>
<div id="backwards-compatible" class="paragraph">
<p>Backwards Compatible</p>
</div>
<div class="literalblock">
<div class="content">
<pre>In the context of this project, backwards compatible save data refers to the ability for multiple versions of this application to use the same saved data.</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-12 18:21:48 +00:00
</div>
</div>
</body>
</html>